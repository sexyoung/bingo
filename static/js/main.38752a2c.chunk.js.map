{"version":3,"sources":["const/event.js","utils.js","class/User.js","pages/HomePage/index.js","components/Matrix/index.js","pages/JoinPage/useEvent.js","pages/JoinPage/index.js","pages/RoomPage/index.js","pages/GamePage/index.js","pages/DeniedPage/index.js","pages/NotFoundPage/index.js","App.js","reportWebVitals.js","index.js","pages/JoinPage/style.module.scss","components/Matrix/style.module.scss","pages/HomePage/style.module.scss"],"names":["SocketEvent","Denied","PlayerJoin","PlayerUpdate","UpdateProcess","MessageSend","MessageUpdate","StartGame","SaveMatrix","TriggerStartGame","ChangeName","GoJoin","RePlay","CheckNum","SelfMatrix","FetchMatrix","UpdateChecked","RandChar","Array","keys","map","v","getRandomChar","len","result","i","String","fromCharCode","length","Math","random","User","socket","user","localStorage","getItem","JSON","stringify","name","id","this","getGUID","setItem","attr","parse","key","on","socketID","console","warn","saveUser","Object","filter","includes","slice","room","emit","message","percentage","newName","save","size","winLine","matrix","num","checkedList","Set","sort","a","b","close","HomePage","history","useHistory","roomDOM","useRef","className","style","slogan","ballGroup","ball","subTitle","menu","create","onClick","replace","onSubmit","e","preventDefault","current","value","form","required","type","ref","maxLength","pattern","placeholder","rule","to","Matrix","data","isActive","handleClick","index","cx","BingoMatrix","active","box","checked","bind","JoinPage","nameDOM","createRef","inputDOM","canvasDOM","chatHistoryDOM","sender","text","useParams","useState","show","setShow","qrcode64","setQRCode64","userList","setUserList","chatHistory","setChatHistory","fill","setMatrix","updateProcess","matrixProcess","updateMatrix","randomMatrix","useLayoutEffect","join","qrcode","toDataURL","location","origin","width","height","error","url","socketList","saveMatrix2Server","off","useEffect","scrollTop","scrollHeight","handleSubmit","send","blur","handleRename","changeName","handleStartGame","startGame","resetMatrix","handlePutNum","toggleShow","block","handleCopyLink","dummy","document","createElement","window","href","body","appendChild","select","execCommand","removeChild","alert","CanvasDOM","NameDOM","defaultValue","InputDOM","ChatHistoryDOM","msg","msgBox","isMe","same","useEvent","event","header","playerCount","fit","userName","content","chatPane","playerPane","fin","bar","renamePane","editorPane","buttons","reset","qrcodePane","src","roomID","link","sendMsgBar","findIndex","u","startBtn","disabled","some","sendBtn","RoomPage","path","useRouteMatch","useMemo","socketIOClient","process","leave","plyerInfoList","winList","GamePage","turnID","setTurnID","push","newCheckedList","newTurnID","newPlyerInfoList","newWinList","connected","fetchMatrix","Boolean","replay","playerInfo","winCount","DeniedPage","NotFoundPage","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.38752a2c.chunk.js","sourcesContent":["export const SocketEvent = {\r\n  Room: {\r\n    Denied: 'RoomDenied',\r\n    PlayerJoin: 'RoomPlayerJoin',\r\n    PlayerUpdate: 'RoomPlayerUpdate',\r\n    UpdateProcess: 'RoomUpdateProcess',\r\n    MessageSend: 'RoomMessageSend',\r\n    MessageUpdate: 'RoomMessageUpdate',\r\n    StartGame: 'RoomStartGame',\r\n    SaveMatrix: 'RoomSaveMatrix',\r\n    TriggerStartGame: 'RoomTriggerStartGame',\r\n  },\r\n  User: {\r\n    ChangeName: 'UserChangeName',\r\n  },\r\n  Game: {\r\n    GoJoin: 'GameGoJoin',\r\n    RePlay: 'GameRePlay',\r\n    CheckNum: 'GameCheckNum',\r\n    SelfMatrix: 'GameSelfMatrix',\r\n    FetchMatrix: 'GameFetchMatrix',\r\n    UpdateChecked: 'GameUpdateChecked',\r\n  }\r\n};","const RandChar = [\r\n  ...[...Array(10).keys()].map(v => v + 48),\r\n  ...[...Array(26).keys()].map(v => v + 65)\r\n];\r\n\r\nexport const getRandomChar = (len = 1) => {\r\n  let result = '';\r\n  for (let i = 0; i < len; i++) {\r\n    result += String.fromCharCode(\r\n      RandChar[~~(RandChar.length * Math.random())]\r\n    );\r\n  }\r\n  return result;\r\n};","import { SocketEvent } from \"const\";\r\nimport { getRandomChar } from \"utils\";\r\n\r\nexport class User {\r\n  constructor(socket) {\r\n    let user = localStorage.getItem('bingoUser');\r\n    if(!user) {\r\n      user = JSON.stringify({\r\n        name: 'Player',\r\n        id: this.getGUID(),\r\n      });\r\n      localStorage.setItem('bingoUser', user);\r\n    }\r\n    const attr = JSON.parse(user);\r\n    for (const key in attr) {\r\n      this[key] = attr[key];\r\n    }\r\n    this.socket = socket;\r\n\r\n    this.socket?.on(\"connected\", socketID => {\r\n      console.warn('socketID connected: ', socketID);\r\n    });\r\n  }\r\n\r\n  save() {\r\n    const saveUser = {};\r\n    const attr = Object.keys(this).filter(v =>\r\n      // socket 不用存\r\n      !['socket', 'room', 'matrix'].includes(v)\r\n    );\r\n\r\n    for (let i = 0; i < attr.length; i++) {\r\n      saveUser[attr[i]] = this[attr[i]];\r\n    }\r\n\r\n    localStorage.setItem('bingoUser', JSON.stringify(saveUser));\r\n  }\r\n\r\n  getGUID(len = 32) {\r\n    let result = '';\r\n    for (let i = 0; i < len; i++) {\r\n      result += getRandomChar();\r\n      if(i % 8 === 7) result += '-';\r\n    }\r\n    return result.slice(0, result.length - 1);\r\n  }\r\n\r\n  join(room) {\r\n    // this.room = room;\r\n    this.socket.emit(\r\n      SocketEvent.Room.PlayerJoin,\r\n      room,\r\n      JSON.parse(localStorage.getItem('bingoUser'))\r\n    );\r\n  }\r\n\r\n  send(room, message) {\r\n    this.socket.emit(SocketEvent.Room.MessageSend, room, message);\r\n  }\r\n\r\n  updateProcess(room, percentage) {\r\n    this.socket.emit(\r\n      SocketEvent.Room.UpdateProcess,\r\n      room,\r\n      percentage\r\n    );\r\n  }\r\n\r\n  changeName(room, newName) {\r\n    this.name = newName;\r\n    this.save();\r\n    this.socket.emit(SocketEvent.User.ChangeName, room, newName);\r\n  }\r\n\r\n  startGame(room, size, winLine) {\r\n    this.socket.emit(SocketEvent.Room.TriggerStartGame, room, size, winLine);\r\n  }\r\n\r\n  saveMatrix2Server(room, matrix) {\r\n    this.socket.emit(SocketEvent.Room.SaveMatrix, room, matrix);\r\n  }\r\n\r\n  checked(room, num) {\r\n    if(!this.checkedList) {\r\n      this.checkedList = [];\r\n    }\r\n    this.checkedList = [...new Set([...this.checkedList, num])].sort((a, b) => a - b);\r\n    this.socket.emit(\r\n      SocketEvent.Game.CheckNum,\r\n      room,\r\n      num\r\n    );\r\n  }\r\n\r\n  fetchMatrix(room) {\r\n    this.socket.emit(\r\n      SocketEvent.Game.FetchMatrix,\r\n      room\r\n    );\r\n  }\r\n\r\n  replay(room) {\r\n    this.socket.emit(\r\n      SocketEvent.Game.RePlay,\r\n      room,\r\n    );\r\n  }\r\n\r\n  leave() {\r\n    this?.socket.close();\r\n  }\r\n}","import { useRef } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\n\r\nimport { getRandomChar } from \"utils\";\r\n\r\nimport style from './style.module.scss';\r\n\r\nexport function HomePage() {\r\n  const history = useHistory();\r\n  const roomDOM = useRef();\r\n\r\n  const handleClick = () => {\r\n    history.replace(`/${getRandomChar(4)}/join`);\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    history.replace(`/${roomDOM.current.value}/join`);\r\n  };\r\n\r\n  return (\r\n    <div className={style.HomePage}>\r\n      <div className={style.slogan}>\r\n        <div className={style.ballGroup}>\r\n          <div className={style.ball}>B</div>\r\n          <div className={style.ball}>I</div>\r\n          <div className={style.ball}>N</div>\r\n          <div className={style.ball}>G</div>\r\n          <div className={style.ball}>O</div>\r\n        </div>\r\n        <div className={style.subTitle}>\r\n          ONLINE BATTLE\r\n        </div>\r\n      </div>\r\n      <div className={style.menu}>\r\n        <button className={style.create} onClick={handleClick}>CREATE</button>\r\n        <h3>OR</h3>\r\n        <form onSubmit={handleSubmit} className={style.form}>\r\n          <input\r\n            required\r\n            type=\"text\"\r\n            ref={roomDOM}\r\n            maxLength=\"4\"\r\n            pattern=\"[0-9A-Z]{4}\"\r\n            placeholder=\"ROOM ID\" />\r\n          <button>JOIN</button>\r\n        </form>\r\n      </div>\r\n      <Link className={style.rule} to=\"/rule\">HOW TO PLAY</Link>\r\n    </div>\r\n  );\r\n}\r\n","import cx from \"classnames\";\r\n\r\nimport style from './style.module.scss';\r\n\r\nexport function Matrix({ data, onClick, checkedList = [], isActive }) {\r\n\r\n  const handleClick = index => {\r\n    isActive && onClick(index);\r\n  };\r\n\r\n  return (\r\n    <div className={cx(style.BingoMatrix, {\r\n      [style.active]: isActive,\r\n    })}>\r\n      {data.map((v, i) =>\r\n        <div\r\n          key={i}\r\n          className={cx(style.box, {\r\n            [style.checked]: checkedList.includes(data[i])\r\n          })}\r\n          onClick={handleClick.bind(this, i)}\r\n        >{v}</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import qrcode from 'qrcode';\r\nimport cx from \"classnames\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { useLayoutEffect, createRef, useState, useEffect } from \"react\";\r\n\r\nimport { SocketEvent } from \"const\";\r\n\r\nimport style from \"./style.module.scss\";\r\n\r\nlet num = 0;\r\n\r\n/** 這邊看起來還是有點亂，想一下怎麼改 */\r\nexport const useEvent = (user) => {\r\n  const nameDOM = createRef();\r\n  const inputDOM = createRef();\r\n  const canvasDOM = createRef();\r\n  const chatHistoryDOM = createRef([\r\n    {sender: 'sexyoung', text: '我說那個誰是不是有點慢啊'}\r\n  ]);\r\n  const history = useHistory();\r\n  const { room } = useParams();\r\n  const [size, setSize] = useState(5);\r\n  const [show, setShow] = useState(\"\");\r\n  const [qrcode64, setQRCode64] = useState(null);\r\n  const [userList, setUserList] = useState([]);\r\n  const [chatHistory, setChatHistory] = useState([]);\r\n  const [ matrix, setMatrix ] = useState(\r\n    Array(size ** 2).fill(0)\r\n  );\r\n\r\n  const updateProcess = matrix => {\r\n    console.warn('updateProcess');\r\n    user.matrix = matrix;\r\n    user.updateProcess(room, matrix.filter(v => v).length / (size ** 2));\r\n  };\r\n\r\n  const matrixProcess = updateMatrix => {\r\n    num = updateMatrix.filter(v => v).length;\r\n    setMatrix(updateMatrix);\r\n    updateProcess(updateMatrix);\r\n  };\r\n\r\n  const randomMatrix = () => {\r\n    const updateMatrix = [...Array(size ** 2).keys()]\r\n      .map(v => v + 1)\r\n      .sort(() => .5 - Math.random());\r\n    /** 這邊是不是有更好的寫法? */\r\n    matrixProcess(updateMatrix);\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n\r\n    user.join(room);\r\n\r\n    qrcode.toDataURL(\r\n      `${location.origin}/#/${room}/join`, {\r\n        width: 512,\r\n        height: 512,\r\n      },\r\n      (error, url) => {\r\n        if (error) return console.error(error);\r\n        setQRCode64(url);\r\n      }\r\n    );\r\n\r\n    const PlayerUpdate = socketList => setUserList(socketList.filter(v => v));\r\n    const MessageUpdate = message => setChatHistory(chatHistory => [ ...chatHistory, message ]);\r\n    const Denied = () => {\r\n      // user.leave();\r\n      // history.push('/denied');\r\n    };\r\n    const StartGame = () => {\r\n      user.save();\r\n      user.saveMatrix2Server(room, user.matrix);\r\n      history.replace(`/${room}/game`);\r\n    };\r\n\r\n    // 拒絕進入，導頁\r\n    user.socket.on(SocketEvent.Room.Denied, Denied);\r\n\r\n    // 使用者更新\r\n    user.socket.on(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\r\n\r\n    // 訊息更新\r\n    user.socket.on(SocketEvent.Room.MessageUpdate, MessageUpdate);\r\n\r\n    // 開始遊戲！\r\n    user.socket.on(SocketEvent.Room.StartGame, StartGame);\r\n\r\n    randomMatrix();\r\n\r\n    return () => {\r\n      user.socket.off(SocketEvent.Room.Denied, Denied);\r\n      user.socket.off(SocketEvent.Room.StartGame, StartGame);\r\n      user.socket.off(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\r\n      user.socket.off(SocketEvent.Room.MessageUpdate, MessageUpdate);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.warn('do it');\r\n    chatHistoryDOM.current.scrollTop = chatHistoryDOM.current.scrollHeight;\r\n  }, [chatHistory.length]);\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    user.send(room, inputDOM.current.value);\r\n    inputDOM.current.value = '';\r\n    setShow('');\r\n    // if mobile....\r\n    inputDOM.current.blur();\r\n  };\r\n\r\n  const toggleShow = block => {\r\n    setShow(\r\n      show === block ? \"\": block\r\n    );\r\n  };\r\n\r\n  const handleRename = e => {\r\n    e.preventDefault();\r\n    if(!nameDOM.current.value) return;\r\n    user.changeName(room, nameDOM.current.value);\r\n    setShow('');\r\n  };\r\n\r\n  const handleStartGame = () => {\r\n    console.warn('satt');\r\n    user.startGame(room, size, size);\r\n  };\r\n\r\n  const resetMatrix = () => {\r\n    const updateMatrix = Array(size ** 2).fill(0);\r\n    /** 這邊是不是有更好的寫法? */\r\n    matrixProcess(updateMatrix);\r\n  };\r\n\r\n  const handlePutNum = index => {\r\n    if(matrix[index]) return;\r\n    const updateMatrix = [...matrix];\r\n    updateMatrix[index] = num + 1;\r\n    /** 這邊是不是有更好的寫法? */\r\n    matrixProcess(updateMatrix);\r\n  };\r\n\r\n  const handleCopyLink = () => {\r\n    const dummy = document.createElement('input');\r\n    const text = window.location.href;\r\n\r\n    document.body.appendChild(dummy);\r\n    dummy.value = text;\r\n    dummy.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(dummy);\r\n    alert('Copied!');\r\n  };\r\n\r\n  return {\r\n    show,\r\n    size,\r\n    matrix,\r\n    qrcode64,\r\n    userList,\r\n    chatHistory,\r\n\r\n    handleSubmit,\r\n    handleRename,\r\n    updateProcess,\r\n    handleStartGame,\r\n    matrixProcess,\r\n    resetMatrix,\r\n    randomMatrix,\r\n    handlePutNum,\r\n    toggleShow,\r\n    handleCopyLink,\r\n\r\n    CanvasDOM: <canvas ref={canvasDOM} id=\"canvas\" className={style.qrcode} />,\r\n    NameDOM: <input\r\n      required\r\n      type=\"text\"\r\n      ref={nameDOM}\r\n      className={style.name}\r\n      placeholder=\"your name\"\r\n      defaultValue={user.name}\r\n    />,\r\n    InputDOM: <input type=\"text\" ref={inputDOM} placeholder=\"輸入訊息\" />,\r\n    ChatHistoryDOM: (\r\n      <div className={style.chatHistory} ref={chatHistoryDOM}>\r\n        {chatHistory.map((msg, i) =>\r\n          <div\r\n            key={i}\r\n            className={cx(style.msgBox, {\r\n              [style.isMe]: user.id === msg.user.id,\r\n              [style.same]: msg.user.id === chatHistory[i - 1]?.user?.id\r\n            })}\r\n          >\r\n            <div className={style.msg}>\r\n              {user.id !== msg.user.id && msg.user.id !== chatHistory[i - 1]?.user?.id &&\r\n                <div className={style.name}>{msg.user.name}</div>\r\n              }\r\n              <div className={style.text}>{msg.text}</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  };\r\n};","import cx from 'classnames';\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Matrix } from \"components\";\r\nimport { useEvent } from './useEvent';\r\n\r\nimport style from \"./style.module.scss\";\r\n\r\nexport function JoinPage({ user }) {\r\n  const {\r\n    NameDOM,\r\n    InputDOM,\r\n    ChatHistoryDOM,\r\n    ...event\r\n  } = useEvent(user);\r\n\r\n  const { room } = useParams();\r\n\r\n  return (\r\n    <div className={style.JoinPage}>\r\n      <div className={style.header}>\r\n        <div className={style.qrcode} onClick={event.toggleShow.bind(this, 'qrcode')} />\r\n        <div className={style.playerCount} onClick={event.toggleShow.bind(this, 'player')}>\r\n          {event.userList.length} Player\r\n        </div>\r\n        <div className={style.fit} />\r\n        <div className={style.userName} onClick={event.toggleShow.bind(this, 'rename')}>\r\n          {user.name}\r\n        </div>\r\n        <div className={style.matrix} onClick={event.toggleShow.bind(this, 'editor')}/>\r\n      </div>\r\n\r\n      <div className={style.content}>\r\n        <div className={cx([style.chatPane], {\r\n          [style.show]: event.show === ''\r\n        })}>\r\n          {ChatHistoryDOM}\r\n        </div>\r\n        {/* 線上玩家 */}\r\n        <ul className={cx([style.playerPane], {\r\n          [style.show]: event.show === 'player'\r\n        })}>\r\n          {event.userList.map((user, index) =>\r\n            <li key={user.id}>\r\n              <div className={style.name}>{user.name}</div>\r\n              <div className={cx(style.percentage, {\r\n                [style.fin]: user.percentage === 1\r\n              })}>\r\n                <div\r\n                  className={style.bar}\r\n                  style={{ width: `${~~(user.percentage * 100)}%`}}\r\n                />\r\n              </div>\r\n            </li>\r\n          )}\r\n        </ul>\r\n\r\n        {/* 改名 */}\r\n        <div className={cx([style.renamePane], {\r\n          [style.show]: event.show === 'rename'\r\n        })}>\r\n          <form onSubmit={event.handleRename}>\r\n            {NameDOM}\r\n            <button>Rename</button>\r\n          </form>\r\n        </div>\r\n\r\n        {/* 表格 */}\r\n        <div className={cx([style.editorPane], {\r\n          [style.show]: event.show === 'editor'\r\n        })}>\r\n          <Matrix {...{\r\n            data: event.matrix,\r\n            onClick: event.handlePutNum,\r\n            isActive: true,\r\n          }} />\r\n          <div className={style.buttons}>\r\n            <button className={style.reset} onClick={event.resetMatrix}>RESET</button>\r\n            <button className={style.random} onClick={event.randomMatrix}>RANDOM</button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={cx([style.qrcodePane], {\r\n          [style.show]: event.show === 'qrcode'\r\n        })}>\r\n          <img src={event.qrcode64} width=\"100%\" />\r\n          <div className={style.roomID}>{room}</div>\r\n          <div className={style.link} onClick={event.handleCopyLink}>\r\n            Copy the Link\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <form className={style.sendMsgBar} onSubmit={event.handleSubmit}>\r\n        {!event.userList.findIndex(u => u.id === user.id) &&\r\n          <button\r\n            type=\"button\"\r\n            className={style.startBtn}\r\n            onClick={event.handleStartGame}\r\n            disabled={event.userList.some(({ percentage = 0 }) => percentage !== 1)}\r\n          >Start</button>\r\n        }\r\n        {InputDOM}\r\n        <button type=\"submit\" className={style.sendBtn}>　</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Route,\r\n  Switch,\r\n} from \"react-router-dom\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport socketIOClient from \"socket.io-client\";\r\nimport { useRouteMatch } from \"react-router-dom\";\r\n\r\nimport { User } from \"class\";\r\nimport * as Page from \"pages\";\r\n\r\nimport style from './style.module.scss';\r\n\r\nconst { REACT_APP_SOCKET_URL: SocketURL } = process.env;\r\n\r\nexport function RoomPage() {\r\n  const { path } = useRouteMatch();\r\n  const user = useMemo(() => new User(socketIOClient(SocketURL)), []);\r\n  useEffect(() => {\r\n    return () => user.leave();\r\n  }, []);\r\n\r\n  if(!user) return null;\r\n\r\n  return (\r\n    <div className={style.RoomPage}>\r\n      <Switch>\r\n        <Route path={`${path}/join`}><Page.JoinPage {...{ user }} /></Route>\r\n        <Route path={`${path}/game`}><Page.GamePage {...{ user }}  /></Route>\r\n        <Route path=\"*\"><Page.NotFoundPage /></Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n","import { SocketEvent } from \"const\";\r\nimport { Matrix } from \"components\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\nimport {\r\n  Link,\r\n  useParams,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\n\r\nlet checkedList = [];\r\nlet plyerInfoList = [];\r\nlet winList = [];\r\n\r\nexport function GamePage({ user }) {\r\n  const { room } = useParams();\r\n  const history = useHistory();\r\n  const [ turnID, setTurnID ] = useState(\"\");\r\n  useLayoutEffect(() => {\r\n    const Denied = () => {\r\n      user.leave();\r\n      history.push('/denied');\r\n    };\r\n\r\n    const UpdateChecked = (newCheckedList, newTurnID, newPlyerInfoList, newWinList = []) => {\r\n      checkedList = newCheckedList;\r\n      plyerInfoList = newPlyerInfoList;\r\n      winList = newWinList;\r\n      setTurnID(newTurnID);\r\n    };\r\n\r\n    const SelfMatrix = (matrix, newCheckedList, newTurnID, newPlyerInfoList, newWinList = []) => {\r\n      user.matrix = matrix;\r\n      UpdateChecked(newCheckedList, newTurnID, newPlyerInfoList, newWinList);\r\n    };\r\n\r\n    // 如果使用者重整的話，並且立馬停止監聽\r\n    const fetchMatrix = () => {\r\n      user.fetchMatrix(room);\r\n      user.socket.off(SocketEvent.Room.PlayerUpdate, fetchMatrix);\r\n    };\r\n\r\n    const GoJoin = () => {\r\n      history.replace(`/${room}/join`);\r\n    };\r\n\r\n    // 拒絕進入，導頁\r\n    user.socket.on(SocketEvent.Room.Denied, Denied);\r\n\r\n    // 點擊數字\r\n    user.socket.on(SocketEvent.Game.UpdateChecked, UpdateChecked);\r\n\r\n    // 從伺服端取得自己的matrix\r\n    user.socket.on(SocketEvent.Game.SelfMatrix, SelfMatrix);\r\n\r\n    // 從伺服端取得自己的matrix\r\n    user.socket.on(SocketEvent.Game.GoJoin, GoJoin);\r\n\r\n    if(user.socket.connected) {\r\n      user.fetchMatrix(room); // trigger RoomPlayerUpdate\r\n    } else {\r\n      // join\r\n      // 如果使用者重整的話，會需要執行這行\r\n      user.join(room);\r\n      user.socket.on(SocketEvent.Room.PlayerUpdate, fetchMatrix);\r\n    }\r\n\r\n    return () => {\r\n      user.socket.off(SocketEvent.Game.GoJoin, GoJoin);\r\n      user.socket.off(SocketEvent.Room.Denied, Denied);\r\n      user.socket.off(SocketEvent.Game.SelfMatrix, SelfMatrix);\r\n      user.socket.off(SocketEvent.Game.UpdateChecked, UpdateChecked);\r\n    };\r\n  }, []);\r\n\r\n  const handleClick = index => {\r\n    if (checkedList.includes(user.matrix[index])) return;\r\n    user.checked(room, user.matrix[index]);\r\n    // save user checked num\r\n    // and notice other user the number is checked\r\n  };\r\n\r\n  const handleReplay = () => {\r\n    user.replay(room);\r\n  };\r\n\r\n  if(!user.matrix?.length) return null;\r\n  return (\r\n    <div>\r\n      <h2>GamePage</h2>\r\n      {Boolean(winList.length) &&\r\n        <div>\r\n          <h2>Result</h2>\r\n          {winList.map((name, index) =>\r\n            <div key={index}>{name} WIN!</div>\r\n          )}\r\n          <div onClick={handleReplay}>Play again</div>\r\n          <Link to=\"/\">Home</Link>\r\n        </div>\r\n      }\r\n      <Matrix {...{\r\n        checkedList,\r\n        data: user.matrix,\r\n        onClick: handleClick,\r\n        isActive: turnID === user.id && !winList.length,\r\n      }} />\r\n      {plyerInfoList.map((playerInfo, index) =>\r\n        <div key={index}>\r\n          {playerInfo.name}: {playerInfo.winCount}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","export function DeniedPage() {\r\n  return (\r\n    <div>\r\n      <h2>DeniedPage</h2>\r\n    </div>\r\n  );\r\n}\r\n","export function NotFoundPage() {\r\n  return (\r\n    <div>\r\n      <h2>NotFoundPage</h2>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport {\r\n  Route,\r\n  Switch,\r\n  HashRouter,\r\n} from \"react-router-dom\";\r\n\r\nimport { User } from \"class\";\r\nimport * as Page from \"pages\";\r\nimport style from './App.module.scss';\r\n\r\nfunction App() {\r\n\r\n  useEffect(() => {\r\n    new User();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={style.App}>\r\n      <HashRouter>\r\n        <Switch>\r\n          <Route exact path=\"/\"><Page.HomePage /></Route>\r\n          <Route path=\"/denied\"><Page.DeniedPage /></Route>\r\n          <Route path=\"/:room\"><Page.RoomPage /></Route>\r\n          <Route path=\"*\"><Page.NotFoundPage /></Route>\r\n        </Switch>\r\n      </HashRouter>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.module.scss';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n  // </React.StrictMode>,\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\nif (module.hot) {\r\n  module.hot.accept();\r\n}\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"JoinPage\":\"style_JoinPage__2syIx\",\"header\":\"style_header__3D9a2\",\"qrcode\":\"style_qrcode__1d2Ih\",\"fit\":\"style_fit__3Id8l\",\"playerCount\":\"style_playerCount__24TPd\",\"userName\":\"style_userName__2lbWH\",\"matrix\":\"style_matrix__i1Hxj\",\"content\":\"style_content__1DY98\",\"show\":\"style_show__3pNc2\",\"playerPane\":\"style_playerPane__Unfwr\",\"name\":\"style_name__sMT9-\",\"percentage\":\"style_percentage__WG0Bt\",\"bar\":\"style_bar__29tX8\",\"fin\":\"style_fin__3TZgo\",\"qrcodePane\":\"style_qrcodePane__2tszi\",\"roomID\":\"style_roomID__3ktQi\",\"link\":\"style_link__3AbK3\",\"renamePane\":\"style_renamePane__12SQR\",\"editorPane\":\"style_editorPane__3Sfxe\",\"buttons\":\"style_buttons__1iFOr\",\"reset\":\"style_reset__yDkTt\",\"chatHistory\":\"style_chatHistory__2wbkW\",\"msgBox\":\"style_msgBox__hGsqv\",\"isMe\":\"style_isMe__-isJe\",\"same\":\"style_same__2VOC-\",\"msg\":\"style_msg__3PQjO\",\"text\":\"style_text__304iS\",\"sendMsgBar\":\"style_sendMsgBar__1ij9P\",\"startBtn\":\"style_startBtn__1oVQu\",\"sendBtn\":\"style_sendBtn__1Mg_5\",\"modal\":\"style_modal__19i7X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BingoMatrix\":\"style_BingoMatrix__1RrGy\",\"active\":\"style_active__2ah_b\",\"box\":\"style_box__1Ip5K\",\"checked\":\"style_checked__3lblk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"HomePage\":\"style_HomePage__3XSZG\",\"slogan\":\"style_slogan__n5BS6\",\"ballGroup\":\"style_ballGroup__1ehfJ\",\"ball\":\"style_ball__deFA8\",\"subTitle\":\"style_subTitle__3YQD5\",\"menu\":\"style_menu__1rbYY\",\"create\":\"style_create__3WjcK\",\"form\":\"style_form__1WyxL\",\"rule\":\"style_rule__1e9G3\"};"],"sourceRoot":""}