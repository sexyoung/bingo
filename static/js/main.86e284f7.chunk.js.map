{"version":3,"sources":["const/event.js","utils.js","class/User.js","pages/HomePage/index.js","components/Matrix/index.js","pages/JoinPage/useEvent.js","pages/JoinPage/index.js","pages/RoomPage/index.js","pages/GamePage/index.js","pages/DeniedPage/index.js","pages/NotFoundPage/index.js","App.js","reportWebVitals.js","index.js","pages/JoinPage/style.module.scss","components/Matrix/style.module.scss","pages/GamePage/style.module.scss","pages/HomePage/style.module.scss"],"names":["SocketEvent","Denied","PlayerJoin","PlayerUpdate","UpdateProcess","MessageSend","MessageUpdate","CountDown","CountDownStop","CountDownEnd","CountDownCancel","StartGame","SaveMatrix","TriggerCountDown","TriggerStartGame","ChangeName","GoJoin","RePlay","CheckNum","SelfMatrix","FetchMatrix","UpdateChecked","RandChar","Array","keys","map","v","getRandomChar","len","result","i","String","fromCharCode","length","Math","random","User","socket","user","localStorage","getItem","JSON","stringify","name","id","this","getGUID","setItem","attr","parse","key","on","socketID","saveUser","Object","filter","includes","slice","room","emit","message","percentage","newName","save","size","winLine","matrix","num","checkedList","Set","sort","a","b","close","HomePage","history","useHistory","roomDOM","useRef","className","style","slogan","ballGroup","ball","subTitle","menu","create","onClick","replace","onSubmit","e","preventDefault","current","value","form","required","type","ref","maxLength","pattern","placeholder","rule","to","Matrix","data","isActive","handleClick","index","cx","BingoMatrix","active","Boolean","box","checked","bind","JoinPage","nameDOM","createRef","inputDOM","useParams","canvasDOM","useState","chatHistoryDOM","show","setShow","count","setCount","userList","setUserList","qrcode64","setQRCode64","chatHistory","setChatHistory","fill","setMatrix","updateProcess","matrixProcess","updateMatrix","randomMatrix","handleStartGame","startGame","useLayoutEffect","join","qrcode","toDataURL","location","origin","pathname","width","height","error","url","console","socketList","leave","push","saveMatrix2Server","off","useEffect","scrollTop","scrollHeight","handleSubmit","send","blur","handleRename","changeName","handleStartCountDown","startCountDown","resetMatrix","handlePutNum","toggleShow","block","handleCopyLink","dummy","document","createElement","text","window","href","body","appendChild","select","execCommand","removeChild","alert","handleCountDownCancel","countDownCancel","CanvasDOM","NameDOM","defaultValue","InputDOM","ChatHistoryDOM","msg","msgBox","isMe","same","useEvent","event","header","playerCount","fit","userName","content","chatPane","playerPane","fin","bar","renamePane","editorPane","buttons","reset","qrcodePane","src","roomID","link","sendMsgBar","findIndex","u","startBtn","disabled","some","sendBtn","countdown","stopBtn","RoomPage","path","useRouteMatch","useMemo","socketIOClient","process","winList","plyerInfoList","nameColor","split","s","charCodeAt","g","GamePage","turnID","setTurnID","newCheckedList","newTurnID","newPlyerInfoList","newWinList","newWinLine","connected","fetchMatrix","turnUser","find","winMap","start","way","playerInfo","player","zIndex","left","winCount","backgroundColor","end","gap","winnerIs","replay","turn","title","your","others","DeniedPage","NotFoundPage","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.86e284f7.chunk.js","sourcesContent":["export const SocketEvent = {\n  Room: {\n    Denied: 'RoomDenied',\n    PlayerJoin: 'RoomPlayerJoin',\n    PlayerUpdate: 'RoomPlayerUpdate',\n    UpdateProcess: 'RoomUpdateProcess',\n    MessageSend: 'RoomMessageSend',\n    MessageUpdate: 'RoomMessageUpdate',\n    CountDown: 'RoomCountDown', // ← 遊戲開始前的倒數\n    CountDownStop: 'RoomCountDownStop',\n    CountDownEnd: 'RoomCountDownEnd',\n    CountDownCancel: 'RoomCountDownCancel',\n    StartGame: 'RoomStartGame',\n    SaveMatrix: 'RoomSaveMatrix',\n    TriggerCountDown: 'RoomTriggerCountDown',\n    TriggerStartGame: 'RoomTriggerStartGame',\n  },\n  User: {\n    ChangeName: 'UserChangeName',\n  },\n  Game: {\n    GoJoin: 'GameGoJoin',\n    RePlay: 'GameRePlay',\n    CheckNum: 'GameCheckNum',\n    SelfMatrix: 'GameSelfMatrix',\n    FetchMatrix: 'GameFetchMatrix',\n    UpdateChecked: 'GameUpdateChecked',\n  }\n};","const RandChar = [\n  ...[...Array(10).keys()].map(v => v + 48),\n  ...[...Array(26).keys()].map(v => v + 65)\n];\n\nexport const getRandomChar = (len = 1) => {\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(\n      RandChar[~~(RandChar.length * Math.random())]\n    );\n  }\n  return result;\n};","import { SocketEvent } from \"const\";\nimport { getRandomChar } from \"utils\";\n\n// TODO: 這邊有一些方法應集中到另一個 Class Room\nexport class User {\n  constructor(socket) {\n    let user = localStorage.getItem('bingoUser');\n    if(!user) {\n      user = JSON.stringify({\n        name: 'Player',\n        id: this.getGUID(),\n      });\n      localStorage.setItem('bingoUser', user);\n    }\n    const attr = JSON.parse(user);\n    for (const key in attr) {\n      this[key] = attr[key];\n    }\n    this.socket = socket;\n\n    this.socket?.on(\"connected\", socketID => {\n      // console.warn('socketID connected: ', socketID);\n    });\n  }\n\n  save() {\n    const saveUser = {};\n    const attr = Object.keys(this).filter(v =>\n      // socket 不用存\n      !['socket', 'room', 'matrix'].includes(v)\n    );\n\n    for (let i = 0; i < attr.length; i++) {\n      saveUser[attr[i]] = this[attr[i]];\n    }\n\n    localStorage.setItem('bingoUser', JSON.stringify(saveUser));\n  }\n\n  getGUID(len = 32) {\n    let result = '';\n    for (let i = 0; i < len; i++) {\n      result += getRandomChar();\n      if(i % 8 === 7) result += '-';\n    }\n    return result.slice(0, result.length - 1);\n  }\n\n  join(room) {\n    // this.room = room;\n    this.socket.emit(\n      SocketEvent.Room.PlayerJoin,\n      room,\n      JSON.parse(localStorage.getItem('bingoUser'))\n    );\n  }\n\n  send(room, message) {\n    this.socket.emit(SocketEvent.Room.MessageSend, room, message);\n  }\n\n  updateProcess(room, percentage) {\n    this.socket.emit(\n      SocketEvent.Room.UpdateProcess,\n      room,\n      percentage\n    );\n  }\n\n  changeName(room, newName) {\n    this.name = newName;\n    this.save();\n    this.socket.emit(SocketEvent.User.ChangeName, room, newName);\n  }\n\n  startCountDown(room) {\n    this.socket.emit(SocketEvent.Room.TriggerCountDown, room);\n  }\n\n  startGame(room, size, winLine) {\n    this.socket.emit(SocketEvent.Room.TriggerStartGame, room, size, winLine);\n  }\n\n  countDownCancel(room) {\n    this.socket.emit(SocketEvent.Room.CountDownCancel, room);\n  }\n\n  saveMatrix2Server(room, matrix) {\n    this.socket.emit(SocketEvent.Room.SaveMatrix, room, matrix);\n  }\n\n  checked(room, num) {\n    if(!this.checkedList) {\n      this.checkedList = [];\n    }\n    this.checkedList = [...new Set([...this.checkedList, num])].sort((a, b) => a - b);\n    this.socket.emit(\n      SocketEvent.Game.CheckNum,\n      room,\n      num\n    );\n  }\n\n  fetchMatrix(room) {\n    this.socket.emit(\n      SocketEvent.Game.FetchMatrix,\n      room\n    );\n  }\n\n  replay(room) {\n    this.socket.emit(\n      SocketEvent.Game.RePlay,\n      room,\n    );\n  }\n\n  leave() {\n    this?.socket.close();\n  }\n}","import { useRef } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\n\nimport { getRandomChar } from \"utils\";\n\nimport style from './style.module.scss';\n\nexport function HomePage() {\n  const history = useHistory();\n  const roomDOM = useRef();\n\n  const handleClick = () => {\n    history.replace(`/${getRandomChar(4)}/join`);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    history.replace(`/${roomDOM.current.value}/join`);\n  };\n\n  return (\n    <div className={style.HomePage}>\n      <div className={style.slogan}>\n        <div className={style.ballGroup}>\n          <div className={style.ball}>B</div>\n          <div className={style.ball}>I</div>\n          <div className={style.ball}>N</div>\n          <div className={style.ball}>G</div>\n          <div className={style.ball}>O</div>\n        </div>\n        <div className={style.subTitle}>\n          ONLINE BATTLE\n        </div>\n      </div>\n      <div className={style.menu}>\n        <button className={style.create} onClick={handleClick}>CREATE</button>\n        <h3>OR</h3>\n        <form onSubmit={handleSubmit} className={style.form}>\n          <input\n            required\n            type=\"text\"\n            ref={roomDOM}\n            maxLength=\"4\"\n            pattern=\"[0-9A-Z]{4}\"\n            placeholder=\"ROOM ID\" />\n          <button>JOIN</button>\n        </form>\n      </div>\n      <Link className={style.rule} to=\"/rule\">HOW TO PLAY</Link>\n    </div>\n  );\n}\n","import cx from \"classnames\";\n\nimport style from './style.module.scss';\n\nexport function Matrix({\n  data,\n  onClick,\n  isActive,\n  className = '',\n  checkedList = [],\n}) {\n\n  const handleClick = index => {\n    isActive && onClick(index);\n  };\n\n  return (\n    <div className={cx(style.BingoMatrix, {\n      [style.active]: isActive,\n      [className]: Boolean(className),\n    })}>\n      {data.map((v, i) =>\n        <div\n          key={i}\n          className={cx(style.box, {\n            [style.checked]: checkedList.includes(data[i])\n          })}\n          onClick={handleClick.bind(this, i)}\n        >{v}</div>\n      )}\n    </div>\n  );\n}\n","import qrcode from 'qrcode';\nimport cx from \"classnames\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useLayoutEffect, createRef, useState, useEffect } from \"react\";\n\nimport { SocketEvent } from \"const\";\n\nimport style from \"./style.module.scss\";\n\nlet num = 0;\n\n/** 這邊看起來還是有點亂，想一下怎麼改 */\nexport const useEvent = (user) => {\n  const nameDOM = createRef();\n  const inputDOM = createRef();\n  const history = useHistory();\n  const { room } = useParams();\n  const canvasDOM = createRef();\n  const [size, setSize] = useState(5);\n  const chatHistoryDOM = createRef([]);\n  const [show, setShow] = useState(\"\");\n  const [count, setCount] = useState(null);\n  const [userList, setUserList] = useState([]);\n  const [qrcode64, setQRCode64] = useState(null);\n  const [chatHistory, setChatHistory] = useState([]);\n  const [ matrix, setMatrix ] = useState(\n    Array(size ** 2).fill(0)\n  );\n\n  const updateProcess = matrix => {\n    // console.warn('updateProcess');\n    user.matrix = matrix;\n    user.updateProcess(room, matrix.filter(v => v).length / (size ** 2));\n  };\n\n  const matrixProcess = updateMatrix => {\n    num = updateMatrix.filter(v => v).length;\n    setMatrix(updateMatrix);\n    updateProcess(updateMatrix);\n  };\n\n  const randomMatrix = () => {\n    const updateMatrix = [...Array(size ** 2).keys()]\n      .map(v => v + 1)\n      .sort(() => .5 - Math.random());\n    /** 這邊是不是有更好的寫法? */\n    matrixProcess(updateMatrix);\n  };\n\n  const handleStartGame = () => {\n    user.startGame(room, size, size);\n  };\n\n  useLayoutEffect(() => {\n\n    // TODO: 應該納入 Room.addUser or User.join(room)\n    user.join(room);\n\n    qrcode.toDataURL(\n      `${location.origin + location.pathname}/#/${room}/join`.replace('bingo//', 'bingo/'), {\n        width: 512,\n        height: 512,\n      },\n      (error, url) => {\n        if (error) return console.error(error);\n        setQRCode64(url);\n      }\n    );\n\n    const PlayerUpdate = socketList => setUserList(socketList.filter(v => v));\n    const MessageUpdate = message => setChatHistory(chatHistory => [ ...chatHistory, message ]);\n    const Denied = () => {\n      user.leave();\n      history.push('/denied');\n    };\n\n    const CountDown = count => {\n      setCount(count);\n    };\n\n    const CountDownStop = () => {\n      setCount(null);\n    };\n\n    const StartGame = () => {\n      user.save();\n      user.saveMatrix2Server(room, user.matrix);\n      history.replace(`/${room}/game`);\n    };\n\n    // 拒絕進入，導頁\n    user.socket.on(SocketEvent.Room.Denied, Denied);\n\n    // 使用者更新\n    user.socket.on(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\n\n    // 訊息更新\n    user.socket.on(SocketEvent.Room.MessageUpdate, MessageUpdate);\n\n    // 開始倒數遊戲！\n    user.socket.on(SocketEvent.Room.CountDown, CountDown);\n\n    // 取消倒數\n    user.socket.on(SocketEvent.Room.CountDownStop, CountDownStop);\n\n    // 倒數結束\n    user.socket.on(SocketEvent.Room.CountDownEnd, handleStartGame);\n\n    // 開始遊戲!\n    user.socket.on(SocketEvent.Room.StartGame, StartGame);\n\n    randomMatrix();\n\n    return () => {\n      user.socket.off(SocketEvent.Room.Denied, Denied);\n      user.socket.off(SocketEvent.Room.CountDown, CountDown);\n      user.socket.off(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\n      user.socket.off(SocketEvent.Room.MessageUpdate, MessageUpdate);\n      user.socket.off(SocketEvent.Room.CountDown, CountDown);\n      user.socket.off(SocketEvent.Room.CountDownStop, CountDownStop);\n      user.socket.off(SocketEvent.Room.CountDownEnd, handleStartGame);\n      user.socket.off(SocketEvent.Room.StartGame, StartGame);\n    };\n  }, []);\n\n  useEffect(() => {\n    // console.warn('do it');\n    chatHistoryDOM.current.scrollTop = chatHistoryDOM.current.scrollHeight;\n  }, [chatHistory.length]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    user.send(room, inputDOM.current.value);\n    inputDOM.current.value = '';\n    setShow('');\n    // if mobile....\n    inputDOM.current.blur();\n  };\n\n  const toggleShow = block => {\n    setShow(\n      show === block ? \"\": block\n    );\n  };\n\n  const handleRename = e => {\n    e.preventDefault();\n    if(!nameDOM.current.value) return;\n    user.changeName(room, nameDOM.current.value);\n    setShow('');\n  };\n\n  const handleStartCountDown = () => {\n    user.startCountDown(room);\n  };\n\n  const resetMatrix = () => {\n    const updateMatrix = Array(size ** 2).fill(0);\n    /** 這邊是不是有更好的寫法? */\n    matrixProcess(updateMatrix);\n  };\n\n  const handlePutNum = index => {\n    if(matrix[index]) return;\n    const updateMatrix = [...matrix];\n    updateMatrix[index] = num + 1;\n    /** 這邊是不是有更好的寫法? */\n    matrixProcess(updateMatrix);\n  };\n\n  const handleCopyLink = () => {\n    const dummy = document.createElement('input');\n    const text = window.location.href;\n\n    document.body.appendChild(dummy);\n    dummy.value = text;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n    alert('Copied!');\n  };\n\n  const handleCountDownCancel = () => {\n    user.countDownCancel(room);\n  };\n\n  return {\n    show,\n    size,\n    count,\n    matrix,\n    qrcode64,\n    userList,\n    chatHistory,\n\n    handleSubmit,\n    handleRename,\n    updateProcess,\n    handleStartCountDown,\n    handleStartGame,\n    matrixProcess,\n    resetMatrix,\n    randomMatrix,\n    handlePutNum,\n    toggleShow,\n    handleCopyLink,\n    handleCountDownCancel,\n\n    CanvasDOM: <canvas ref={canvasDOM} id=\"canvas\" className={style.qrcode} />,\n    NameDOM: <input\n      required\n      type=\"text\"\n      ref={nameDOM}\n      className={style.name}\n      placeholder=\"your name\"\n      defaultValue={user.name}\n    />,\n    InputDOM: <input type=\"text\" ref={inputDOM} placeholder=\"輸入訊息\" required />,\n    ChatHistoryDOM: (\n      <div className={style.chatHistory} ref={chatHistoryDOM}>\n        {chatHistory.map((msg, i) =>\n          <div\n            key={i}\n            className={cx(style.msgBox, {\n              [style.isMe]: user.id === msg.user.id,\n              [style.same]: msg.user.id === chatHistory[i - 1]?.user?.id\n            })}\n          >\n            <div className={style.msg}>\n              {user.id !== msg.user.id && msg.user.id !== chatHistory[i - 1]?.user?.id &&\n                <div className={style.name}>{msg.user.name}</div>\n              }\n              <div className={style.text}>{msg.text}</div>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  };\n};","import cx from 'classnames';\nimport { useParams } from \"react-router-dom\";\nimport { Matrix } from \"components\";\nimport { useEvent } from './useEvent';\n\nimport style from \"./style.module.scss\";\n\nexport function JoinPage({ user }) {\n  const {\n    NameDOM,\n    InputDOM,\n    ChatHistoryDOM,\n    ...event\n  } = useEvent(user);\n\n  const { room } = useParams();\n\n  return (\n    <div className={style.JoinPage}>\n      <div className={style.header}>\n        <div className={style.qrcode} onClick={event.toggleShow.bind(this, 'qrcode')} />\n        <div className={style.playerCount} onClick={event.toggleShow.bind(this, 'player')}>\n          {event.userList.length} Player\n        </div>\n        <div className={style.fit} />\n        <div className={style.userName} onClick={event.toggleShow.bind(this, 'rename')}>\n          {user.name}\n        </div>\n        <div className={style.matrix} onClick={event.toggleShow.bind(this, 'editor')}/>\n      </div>\n\n      <div className={style.content}>\n        <div className={cx([style.chatPane], {\n          [style.show]: event.show === ''\n        })}>\n          {ChatHistoryDOM}\n        </div>\n        {/* 線上玩家 */}\n        <ul className={cx([style.playerPane], {\n          [style.show]: event.show === 'player'\n        })}>\n          {event.userList.map(user =>\n            <li key={user.id}>\n              <div className={style.name}>{user.name}</div>\n              <div className={cx(style.percentage, {\n                [style.fin]: user.percentage === 1\n              })}>\n                <div\n                  className={style.bar}\n                  style={{ width: `${~~(user.percentage * 100)}%`}}\n                />\n              </div>\n            </li>\n          )}\n        </ul>\n\n        {/* 改名 */}\n        <div className={cx([style.renamePane], {\n          [style.show]: event.show === 'rename'\n        })}>\n          <form onSubmit={event.handleRename}>\n            {NameDOM}\n            <button>Rename</button>\n          </form>\n        </div>\n\n        {/* 表格 */}\n        <div className={cx([style.editorPane], {\n          [style.show]: event.show === 'editor'\n        })}>\n          <Matrix {...{\n            data: event.matrix,\n            onClick: event.handlePutNum,\n            isActive: true,\n          }} />\n          <div className={style.buttons}>\n            <button className={style.reset} onClick={event.resetMatrix}>RESET</button>\n            <button className={style.random} onClick={event.randomMatrix}>RANDOM</button>\n          </div>\n        </div>\n\n        {/* qr code */}\n        <div className={cx([style.qrcodePane], {\n          [style.show]: event.show === 'qrcode'\n        })}>\n          <img src={event.qrcode64} width=\"100%\" />\n          <div className={style.roomID}>{room}</div>\n          <div className={style.link} onClick={event.handleCopyLink}>\n            Copy the Link\n          </div>\n        </div>\n\n      </div>\n\n      <form className={style.sendMsgBar} onSubmit={event.handleSubmit}>\n        {!event.userList.findIndex(u => u.id === user.id) &&\n          <button\n            type=\"button\"\n            className={style.startBtn}\n            onClick={event.handleStartCountDown}\n            disabled={event.userList.some(({ percentage = 0 }) => percentage !== 1)}\n          >Start</button>\n        }\n        {InputDOM}\n        <button type=\"submit\" className={style.sendBtn}>　</button>\n      </form>\n\n      {event.count !== null &&\n          <div className={cx(style.countdown)}>\n            {event.count}\n            <button className={style.stopBtn} onClick={event.handleCountDownCancel}>CANCEL</button>\n          </div>\n      }\n    </div>\n  );\n}\n","import {\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport { useEffect, useMemo } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { useRouteMatch } from \"react-router-dom\";\n\nimport { User } from \"class\";\nimport * as Page from \"pages\";\n\nimport style from './style.module.scss';\n\nconst { REACT_APP_SOCKET_URL: SocketURL } = process.env;\n\nexport function RoomPage() {\n  const { path } = useRouteMatch();\n  const user = useMemo(() => new User(socketIOClient(SocketURL)), []);\n  useEffect(() => {\n    return () => user.leave();\n  }, []);\n\n  if(!user) return null;\n\n  return (\n    <div className={style.RoomPage}>\n      <Switch>\n        <Route path={`${path}/join`}><Page.JoinPage {...{ user }} /></Route>\n        <Route path={`${path}/game`}><Page.GamePage {...{ user }}  /></Route>\n        <Route path=\"*\"><Page.NotFoundPage /></Route>\n      </Switch>\n    </div>\n  );\n}\n","import { SocketEvent } from \"const\";\nimport { Matrix } from \"components\";\nimport { useLayoutEffect, useState } from \"react\";\nimport {\n  Link,\n  useParams,\n  useHistory,\n} from \"react-router-dom\";\n\nimport style from './style.module.scss';\n\nlet winLine = 0;\nlet winList = [];\nlet checkedList = [];\nlet plyerInfoList = [];\n\nconst nameColor = name => {\n  const num = +name.split('').map(s => s.charCodeAt()).join('');\n  const r = (~~(num / 23)) % 256;\n  const g = (~~(num / 24)) % 256;\n  const b = (~~(num / 25)) % 256;\n  return `rgba(${r}, ${g}, ${b}, .45)`;\n};\n\nexport function GamePage({ user }) {\n  const { room } = useParams();\n  const history = useHistory();\n  const [ turnID, setTurnID ] = useState(\"\");\n  useLayoutEffect(() => {\n    const Denied = () => {\n      user.leave();\n      history.push('/denied');\n    };\n\n    const UpdateChecked = (newCheckedList, newTurnID, newPlyerInfoList, newWinList = [], newWinLine) => {\n      checkedList = newCheckedList;\n      plyerInfoList = newPlyerInfoList;\n      winList = newWinList;\n      winLine = newWinLine;\n      setTurnID(newTurnID);\n    };\n\n    const SelfMatrix = (matrix, newCheckedList, newTurnID, newPlyerInfoList, newWinList = [], newWinLine) => {\n      user.matrix = matrix;\n      UpdateChecked(newCheckedList, newTurnID, newPlyerInfoList, newWinList, newWinLine);\n    };\n\n    // 如果使用者重整的話，並且立馬停止監聽\n    const fetchMatrix = () => {\n      user.fetchMatrix(room);\n      user.socket.off(SocketEvent.Room.PlayerUpdate, fetchMatrix);\n    };\n\n    const GoJoin = () => {\n      history.replace(`/${room}/join`);\n    };\n\n    // 拒絕進入，導頁\n    user.socket.on(SocketEvent.Room.Denied, Denied);\n\n    // 點擊數字\n    user.socket.on(SocketEvent.Game.UpdateChecked, UpdateChecked);\n\n    // 從伺服端取得自己的matrix\n    user.socket.on(SocketEvent.Game.SelfMatrix, SelfMatrix);\n\n    // 從伺服端取得自己的matrix\n    user.socket.on(SocketEvent.Game.GoJoin, GoJoin);\n\n    if(user.socket.connected) {\n      user.fetchMatrix(room); // trigger RoomPlayerUpdate\n    } else {\n      // join\n      // 如果使用者重整的話，會需要執行這行\n      user.join(room);\n      user.socket.on(SocketEvent.Room.PlayerUpdate, fetchMatrix);\n    }\n\n    return () => {\n      user.socket.off(SocketEvent.Game.GoJoin, GoJoin);\n      user.socket.off(SocketEvent.Room.Denied, Denied);\n      user.socket.off(SocketEvent.Game.SelfMatrix, SelfMatrix);\n      user.socket.off(SocketEvent.Game.UpdateChecked, UpdateChecked);\n    };\n  }, []);\n\n  const handleClick = index => {\n    if (checkedList.includes(user.matrix[index])) return;\n    user.checked(room, user.matrix[index]);\n    // save user checked num\n    // and notice other user the number is checked\n  };\n\n  const handleReplay = () => {\n    user.replay(room);\n  };\n\n  // winLine = 5;\n  // plyerInfoList = [\n  //   {name: '謝', winCount: ~~(Math.random() * 6)},\n  //   {name: 'def', winCount: ~~(Math.random() * 6)},\n  // ];\n  // winList = ['sexyoung', 'kelly']; // test\n  // console.warn(Boolean(winList.length)); // test\n  // user.matrix = [...Array(25).keys()]; // test\n  if(!user.matrix?.length) return null;\n\n  const turnUser = plyerInfoList.find(({ id }) => id === turnID) || {};\n\n  return (\n    <div className={style.GamePage}>\n      <div className={style.winMap}>\n        <div className={style.start}>0</div>\n        <div className={style.way}>\n          {plyerInfoList.map((playerInfo, index) =>\n            <div\n              key={index}\n              className={style.player}\n              style={{\n                zIndex: index,\n                left: `${100 * (playerInfo.winCount / winLine)}%`,\n              }}\n            >\n              <div\n                className={style.nameColor}\n                style={{\n                  backgroundColor: nameColor(playerInfo.name),\n                }}\n              />\n              {playerInfo.name.slice(0, 1)}\n            </div>\n          )}\n        </div>\n        <div className={style.end}>{winLine}</div>\n      </div>\n      <div className={style.gap}>\n        {\n          Boolean(winList.length) ?\n            <div className={style.result}>\n              <div className={style.winList}>\n                <div className={style.winnerIs}>Winner is</div>\n                <span>{winList.join(', ')}</span>\n              </div>\n              <div className={style.buttons}>\n                <div onClick={handleReplay}>Replay</div>\n                <Link to=\"/\">Home</Link>\n              </div>\n            </div>:\n            <div className={style.turn}>\n              <div className={style.title}>\n                {turnID === user.id ?\n                  <div className={style.your}>YOUR</div>:\n                  <div className={style.others}>\n                    {turnUser?.name}'s\n                  </div>\n                }\n                TURN\n              </div>\n            </div>\n        }\n      </div>\n      <Matrix {...{\n        checkedList,\n        data: user.matrix,\n        onClick: handleClick,\n        className: style.Matrix,\n        isActive: turnID === user.id && !winList.length,\n      }} />\n    </div>\n  );\n}\n","export function DeniedPage() {\n  return (\n    <div>\n      <h2>DeniedPage</h2>\n    </div>\n  );\n}\n","export function NotFoundPage() {\n  return (\n    <div>\n      <h2>NotFoundPage</h2>\n    </div>\n  );\n}\n","import { useEffect } from \"react\";\nimport {\n  Route,\n  Switch,\n  HashRouter,\n} from \"react-router-dom\";\n\nimport { User } from \"class\";\nimport * as Page from \"pages\";\nimport style from './App.module.scss';\n\nfunction App() {\n\n  useEffect(() => {\n    new User();\n  }, []);\n\n  return (\n    <div className={style.App}>\n      <HashRouter>\n        <Switch>\n          <Route exact path=\"/\"><Page.HomePage /></Route>\n          <Route path=\"/denied\"><Page.DeniedPage /></Route>\n          <Route path=\"/:room\"><Page.RoomPage /></Route>\n          <Route path=\"*\"><Page.NotFoundPage /></Route>\n        </Switch>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.module.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n  // </React.StrictMode>,\n  <App />,\n  document.getElementById('root')\n);\n\nif (module.hot) {\n  module.hot.accept();\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"JoinPage\":\"style_JoinPage__1yRqt\",\"header\":\"style_header__3tP8g\",\"qrcode\":\"style_qrcode__1Ymzf\",\"fit\":\"style_fit__3ueTB\",\"playerCount\":\"style_playerCount__2ZlMH\",\"userName\":\"style_userName__2FLYj\",\"matrix\":\"style_matrix__3DhF3\",\"content\":\"style_content__3hdnE\",\"show\":\"style_show__1iKK8\",\"playerPane\":\"style_playerPane__3aZLP\",\"name\":\"style_name__1NsHE\",\"percentage\":\"style_percentage__1IAjC\",\"bar\":\"style_bar__WRKm2\",\"fin\":\"style_fin__-vbWu\",\"qrcodePane\":\"style_qrcodePane__2NTJq\",\"roomID\":\"style_roomID__2pQSQ\",\"link\":\"style_link__3kdmi\",\"renamePane\":\"style_renamePane__1NFcr\",\"editorPane\":\"style_editorPane__3dOQM\",\"buttons\":\"style_buttons__1B8NJ\",\"reset\":\"style_reset__1bZl_\",\"chatHistory\":\"style_chatHistory__2fE-_\",\"msgBox\":\"style_msgBox__oveu_\",\"isMe\":\"style_isMe__3khzJ\",\"same\":\"style_same__23AjY\",\"msg\":\"style_msg__19tUv\",\"text\":\"style_text__HUwxi\",\"sendMsgBar\":\"style_sendMsgBar__qhnKV\",\"startBtn\":\"style_startBtn__3y_kI\",\"sendBtn\":\"style_sendBtn__1QmdX\",\"countdown\":\"style_countdown__3tY60\",\"stopBtn\":\"style_stopBtn__1zDc6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BingoMatrix\":\"style_BingoMatrix__3ELFw\",\"active\":\"style_active__2Nq_8\",\"box\":\"style_box__3N-zJ\",\"checked\":\"style_checked__xbBbd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GamePage\":\"style_GamePage__3oB8L\",\"winMap\":\"style_winMap__2EpiN\",\"start\":\"style_start__3UEjd\",\"way\":\"style_way__3TNYO\",\"player\":\"style_player__1mIID\",\"nameColor\":\"style_nameColor__haFkJ\",\"end\":\"style_end__IFxsV\",\"gap\":\"style_gap__3ZdYz\",\"result\":\"style_result__3WXQ5\",\"winList\":\"style_winList__OB6Xp\",\"winnerIs\":\"style_winnerIs__8g5sy\",\"buttons\":\"style_buttons__2R5Gl\",\"turn\":\"style_turn__4Q5mq\",\"title\":\"style_title__3wcDe\",\"your\":\"style_your__1NriA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"HomePage\":\"style_HomePage__39HyE\",\"slogan\":\"style_slogan__3ESLi\",\"ballGroup\":\"style_ballGroup__3Yrc5\",\"ball\":\"style_ball__2mxKH\",\"subTitle\":\"style_subTitle__1-Xg-\",\"menu\":\"style_menu__2Jp3l\",\"create\":\"style_create__2PDh_\",\"form\":\"style_form__3edYN\",\"rule\":\"style_rule__Cjqvv\"};"],"sourceRoot":""}