{"version":3,"sources":["const/event.js","utils.js","class/User.js","pages/HomePage/index.js","components/Matrix/index.js","pages/JoinPage/useEvent.js","pages/JoinPage/index.js","pages/RoomPage/index.js","pages/GamePage/index.js","pages/DeniedPage/index.js","pages/NotFoundPage/index.js","App.js","reportWebVitals.js","index.js","pages/JoinPage/style.module.scss","components/Matrix/style.module.scss","pages/HomePage/style.module.scss","pages/GamePage/style.module.scss"],"names":["SocketEvent","Denied","PlayerJoin","PlayerUpdate","UpdateProcess","MessageSend","MessageUpdate","StartGame","SaveMatrix","TriggerStartGame","ChangeName","GoJoin","RePlay","CheckNum","SelfMatrix","FetchMatrix","UpdateChecked","RandChar","Array","keys","map","v","getRandomChar","len","result","i","String","fromCharCode","length","Math","random","User","socket","user","localStorage","getItem","JSON","stringify","name","id","this","getGUID","setItem","attr","parse","key","on","socketID","console","warn","saveUser","Object","filter","includes","slice","room","emit","message","percentage","newName","save","size","winLine","matrix","num","checkedList","Set","sort","a","b","close","HomePage","history","useHistory","roomDOM","useRef","className","style","slogan","ballGroup","ball","subTitle","menu","create","onClick","replace","onSubmit","e","preventDefault","current","value","form","required","type","ref","maxLength","pattern","placeholder","rule","to","Matrix","data","isActive","handleClick","index","cx","BingoMatrix","active","Boolean","box","checked","bind","JoinPage","nameDOM","createRef","inputDOM","canvasDOM","chatHistoryDOM","useParams","useState","show","setShow","qrcode64","setQRCode64","userList","setUserList","chatHistory","setChatHistory","fill","setMatrix","updateProcess","matrixProcess","updateMatrix","randomMatrix","useLayoutEffect","join","qrcode","toDataURL","location","origin","pathname","width","height","error","url","socketList","saveMatrix2Server","off","useEffect","scrollTop","scrollHeight","handleSubmit","send","blur","handleRename","changeName","handleStartGame","startGame","resetMatrix","handlePutNum","toggleShow","block","handleCopyLink","dummy","document","createElement","text","window","href","body","appendChild","select","execCommand","removeChild","alert","CanvasDOM","NameDOM","defaultValue","InputDOM","ChatHistoryDOM","msg","msgBox","isMe","same","useEvent","event","header","playerCount","fit","userName","content","chatPane","playerPane","fin","bar","renamePane","editorPane","buttons","reset","qrcodePane","src","roomID","link","sendMsgBar","findIndex","u","startBtn","disabled","some","sendBtn","RoomPage","path","useRouteMatch","useMemo","socketIOClient","process","leave","winList","plyerInfoList","nameColor","split","s","charCodeAt","g","GamePage","turnID","setTurnID","push","newCheckedList","newTurnID","newPlyerInfoList","newWinList","newWinLine","connected","fetchMatrix","winMap","start","way","playerInfo","player","zIndex","left","winCount","backgroundColor","end","gap","winnerIs","replay","DeniedPage","NotFoundPage","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.a739c15b.chunk.js","sourcesContent":["export const SocketEvent = {\n  Room: {\n    Denied: 'RoomDenied',\n    PlayerJoin: 'RoomPlayerJoin',\n    PlayerUpdate: 'RoomPlayerUpdate',\n    UpdateProcess: 'RoomUpdateProcess',\n    MessageSend: 'RoomMessageSend',\n    MessageUpdate: 'RoomMessageUpdate',\n    StartGame: 'RoomStartGame',\n    SaveMatrix: 'RoomSaveMatrix',\n    TriggerStartGame: 'RoomTriggerStartGame',\n  },\n  User: {\n    ChangeName: 'UserChangeName',\n  },\n  Game: {\n    GoJoin: 'GameGoJoin',\n    RePlay: 'GameRePlay',\n    CheckNum: 'GameCheckNum',\n    SelfMatrix: 'GameSelfMatrix',\n    FetchMatrix: 'GameFetchMatrix',\n    UpdateChecked: 'GameUpdateChecked',\n  }\n};","const RandChar = [\n  ...[...Array(10).keys()].map(v => v + 48),\n  ...[...Array(26).keys()].map(v => v + 65)\n];\n\nexport const getRandomChar = (len = 1) => {\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(\n      RandChar[~~(RandChar.length * Math.random())]\n    );\n  }\n  return result;\n};","import { SocketEvent } from \"const\";\nimport { getRandomChar } from \"utils\";\n\nexport class User {\n  constructor(socket) {\n    let user = localStorage.getItem('bingoUser');\n    if(!user) {\n      user = JSON.stringify({\n        name: 'Player',\n        id: this.getGUID(),\n      });\n      localStorage.setItem('bingoUser', user);\n    }\n    const attr = JSON.parse(user);\n    for (const key in attr) {\n      this[key] = attr[key];\n    }\n    this.socket = socket;\n\n    this.socket?.on(\"connected\", socketID => {\n      console.warn('socketID connected: ', socketID);\n    });\n  }\n\n  save() {\n    const saveUser = {};\n    const attr = Object.keys(this).filter(v =>\n      // socket 不用存\n      !['socket', 'room', 'matrix'].includes(v)\n    );\n\n    for (let i = 0; i < attr.length; i++) {\n      saveUser[attr[i]] = this[attr[i]];\n    }\n\n    localStorage.setItem('bingoUser', JSON.stringify(saveUser));\n  }\n\n  getGUID(len = 32) {\n    let result = '';\n    for (let i = 0; i < len; i++) {\n      result += getRandomChar();\n      if(i % 8 === 7) result += '-';\n    }\n    return result.slice(0, result.length - 1);\n  }\n\n  join(room) {\n    // this.room = room;\n    this.socket.emit(\n      SocketEvent.Room.PlayerJoin,\n      room,\n      JSON.parse(localStorage.getItem('bingoUser'))\n    );\n  }\n\n  send(room, message) {\n    this.socket.emit(SocketEvent.Room.MessageSend, room, message);\n  }\n\n  updateProcess(room, percentage) {\n    this.socket.emit(\n      SocketEvent.Room.UpdateProcess,\n      room,\n      percentage\n    );\n  }\n\n  changeName(room, newName) {\n    this.name = newName;\n    this.save();\n    this.socket.emit(SocketEvent.User.ChangeName, room, newName);\n  }\n\n  startGame(room, size, winLine) {\n    this.socket.emit(SocketEvent.Room.TriggerStartGame, room, size, winLine);\n  }\n\n  saveMatrix2Server(room, matrix) {\n    this.socket.emit(SocketEvent.Room.SaveMatrix, room, matrix);\n  }\n\n  checked(room, num) {\n    if(!this.checkedList) {\n      this.checkedList = [];\n    }\n    this.checkedList = [...new Set([...this.checkedList, num])].sort((a, b) => a - b);\n    this.socket.emit(\n      SocketEvent.Game.CheckNum,\n      room,\n      num\n    );\n  }\n\n  fetchMatrix(room) {\n    this.socket.emit(\n      SocketEvent.Game.FetchMatrix,\n      room\n    );\n  }\n\n  replay(room) {\n    this.socket.emit(\n      SocketEvent.Game.RePlay,\n      room,\n    );\n  }\n\n  leave() {\n    this?.socket.close();\n  }\n}","import { useRef } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\n\nimport { getRandomChar } from \"utils\";\n\nimport style from './style.module.scss';\n\nexport function HomePage() {\n  const history = useHistory();\n  const roomDOM = useRef();\n\n  const handleClick = () => {\n    history.replace(`/${getRandomChar(4)}/join`);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    history.replace(`/${roomDOM.current.value}/join`);\n  };\n\n  return (\n    <div className={style.HomePage}>\n      <div className={style.slogan}>\n        <div className={style.ballGroup}>\n          <div className={style.ball}>B</div>\n          <div className={style.ball}>I</div>\n          <div className={style.ball}>N</div>\n          <div className={style.ball}>G</div>\n          <div className={style.ball}>O</div>\n        </div>\n        <div className={style.subTitle}>\n          ONLINE BATTLE\n        </div>\n      </div>\n      <div className={style.menu}>\n        <button className={style.create} onClick={handleClick}>CREATE</button>\n        <h3>OR</h3>\n        <form onSubmit={handleSubmit} className={style.form}>\n          <input\n            required\n            type=\"text\"\n            ref={roomDOM}\n            maxLength=\"4\"\n            pattern=\"[0-9A-Z]{4}\"\n            placeholder=\"ROOM ID\" />\n          <button>JOIN</button>\n        </form>\n      </div>\n      <Link className={style.rule} to=\"/rule\">HOW TO PLAY</Link>\n    </div>\n  );\n}\n","import cx from \"classnames\";\n\nimport style from './style.module.scss';\n\nexport function Matrix({\n  data,\n  onClick,\n  isActive,\n  className = '',\n  checkedList = [],\n}) {\n\n  const handleClick = index => {\n    isActive && onClick(index);\n  };\n\n  return (\n    <div className={cx(style.BingoMatrix, {\n      [style.active]: isActive,\n      [className]: Boolean(className),\n    })}>\n      {data.map((v, i) =>\n        <div\n          key={i}\n          className={cx(style.box, {\n            [style.checked]: checkedList.includes(data[i])\n          })}\n          onClick={handleClick.bind(this, i)}\n        >{v}</div>\n      )}\n    </div>\n  );\n}\n","import qrcode from 'qrcode';\nimport cx from \"classnames\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useLayoutEffect, createRef, useState, useEffect } from \"react\";\n\nimport { SocketEvent } from \"const\";\n\nimport style from \"./style.module.scss\";\n\nlet num = 0;\n\n/** 這邊看起來還是有點亂，想一下怎麼改 */\nexport const useEvent = (user) => {\n  const nameDOM = createRef();\n  const inputDOM = createRef();\n  const canvasDOM = createRef();\n  const chatHistoryDOM = createRef([]);\n  const history = useHistory();\n  const { room } = useParams();\n  const [size, setSize] = useState(5);\n  const [show, setShow] = useState(\"\");\n  const [qrcode64, setQRCode64] = useState(null);\n  const [userList, setUserList] = useState([]);\n  const [chatHistory, setChatHistory] = useState([]);\n  const [ matrix, setMatrix ] = useState(\n    Array(size ** 2).fill(0)\n  );\n\n  const updateProcess = matrix => {\n    console.warn('updateProcess');\n    user.matrix = matrix;\n    user.updateProcess(room, matrix.filter(v => v).length / (size ** 2));\n  };\n\n  const matrixProcess = updateMatrix => {\n    num = updateMatrix.filter(v => v).length;\n    setMatrix(updateMatrix);\n    updateProcess(updateMatrix);\n  };\n\n  const randomMatrix = () => {\n    const updateMatrix = [...Array(size ** 2).keys()]\n      .map(v => v + 1)\n      .sort(() => .5 - Math.random());\n    /** 這邊是不是有更好的寫法? */\n    matrixProcess(updateMatrix);\n  };\n\n  useLayoutEffect(() => {\n\n    user.join(room);\n\n    qrcode.toDataURL(\n      `${location.origin + location.pathname}/#/${room}/join`.replace('bingo//', 'bingo/'), {\n        width: 512,\n        height: 512,\n      },\n      (error, url) => {\n        if (error) return console.error(error);\n        setQRCode64(url);\n      }\n    );\n\n    const PlayerUpdate = socketList => setUserList(socketList.filter(v => v));\n    const MessageUpdate = message => setChatHistory(chatHistory => [ ...chatHistory, message ]);\n    const Denied = () => {\n      // user.leave();\n      // history.push('/denied');\n    };\n    const StartGame = () => {\n      user.save();\n      user.saveMatrix2Server(room, user.matrix);\n      history.replace(`/${room}/game`);\n    };\n\n    // 拒絕進入，導頁\n    user.socket.on(SocketEvent.Room.Denied, Denied);\n\n    // 使用者更新\n    user.socket.on(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\n\n    // 訊息更新\n    user.socket.on(SocketEvent.Room.MessageUpdate, MessageUpdate);\n\n    // 開始遊戲！\n    user.socket.on(SocketEvent.Room.StartGame, StartGame);\n\n    randomMatrix();\n\n    return () => {\n      user.socket.off(SocketEvent.Room.Denied, Denied);\n      user.socket.off(SocketEvent.Room.StartGame, StartGame);\n      user.socket.off(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\n      user.socket.off(SocketEvent.Room.MessageUpdate, MessageUpdate);\n    };\n  }, []);\n\n  useEffect(() => {\n    console.warn('do it');\n    chatHistoryDOM.current.scrollTop = chatHistoryDOM.current.scrollHeight;\n  }, [chatHistory.length]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    user.send(room, inputDOM.current.value);\n    inputDOM.current.value = '';\n    setShow('');\n    // if mobile....\n    inputDOM.current.blur();\n  };\n\n  const toggleShow = block => {\n    setShow(\n      show === block ? \"\": block\n    );\n  };\n\n  const handleRename = e => {\n    e.preventDefault();\n    if(!nameDOM.current.value) return;\n    user.changeName(room, nameDOM.current.value);\n    setShow('');\n  };\n\n  const handleStartGame = () => {\n    console.warn('satt');\n    user.startGame(room, size, size);\n  };\n\n  const resetMatrix = () => {\n    const updateMatrix = Array(size ** 2).fill(0);\n    /** 這邊是不是有更好的寫法? */\n    matrixProcess(updateMatrix);\n  };\n\n  const handlePutNum = index => {\n    if(matrix[index]) return;\n    const updateMatrix = [...matrix];\n    updateMatrix[index] = num + 1;\n    /** 這邊是不是有更好的寫法? */\n    matrixProcess(updateMatrix);\n  };\n\n  const handleCopyLink = () => {\n    const dummy = document.createElement('input');\n    const text = window.location.href;\n\n    document.body.appendChild(dummy);\n    dummy.value = text;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n    alert('Copied!');\n  };\n\n  return {\n    show,\n    size,\n    matrix,\n    qrcode64,\n    userList,\n    chatHistory,\n\n    handleSubmit,\n    handleRename,\n    updateProcess,\n    handleStartGame,\n    matrixProcess,\n    resetMatrix,\n    randomMatrix,\n    handlePutNum,\n    toggleShow,\n    handleCopyLink,\n\n    CanvasDOM: <canvas ref={canvasDOM} id=\"canvas\" className={style.qrcode} />,\n    NameDOM: <input\n      required\n      type=\"text\"\n      ref={nameDOM}\n      className={style.name}\n      placeholder=\"your name\"\n      defaultValue={user.name}\n    />,\n    InputDOM: <input type=\"text\" ref={inputDOM} placeholder=\"輸入訊息\" />,\n    ChatHistoryDOM: (\n      <div className={style.chatHistory} ref={chatHistoryDOM}>\n        {chatHistory.map((msg, i) =>\n          <div\n            key={i}\n            className={cx(style.msgBox, {\n              [style.isMe]: user.id === msg.user.id,\n              [style.same]: msg.user.id === chatHistory[i - 1]?.user?.id\n            })}\n          >\n            <div className={style.msg}>\n              {user.id !== msg.user.id && msg.user.id !== chatHistory[i - 1]?.user?.id &&\n                <div className={style.name}>{msg.user.name}</div>\n              }\n              <div className={style.text}>{msg.text}</div>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  };\n};","import cx from 'classnames';\nimport { useParams } from \"react-router-dom\";\nimport { Matrix } from \"components\";\nimport { useEvent } from './useEvent';\n\nimport style from \"./style.module.scss\";\n\nexport function JoinPage({ user }) {\n  const {\n    NameDOM,\n    InputDOM,\n    ChatHistoryDOM,\n    ...event\n  } = useEvent(user);\n\n  const { room } = useParams();\n\n  return (\n    <div className={style.JoinPage}>\n      <div className={style.header}>\n        <div className={style.qrcode} onClick={event.toggleShow.bind(this, 'qrcode')} />\n        <div className={style.playerCount} onClick={event.toggleShow.bind(this, 'player')}>\n          {event.userList.length} Player\n        </div>\n        <div className={style.fit} />\n        <div className={style.userName} onClick={event.toggleShow.bind(this, 'rename')}>\n          {user.name}\n        </div>\n        <div className={style.matrix} onClick={event.toggleShow.bind(this, 'editor')}/>\n      </div>\n\n      <div className={style.content}>\n        <div className={cx([style.chatPane], {\n          [style.show]: event.show === ''\n        })}>\n          {ChatHistoryDOM}\n        </div>\n        {/* 線上玩家 */}\n        <ul className={cx([style.playerPane], {\n          [style.show]: event.show === 'player'\n        })}>\n          {event.userList.map((user, index) =>\n            <li key={user.id}>\n              <div className={style.name}>{user.name}</div>\n              <div className={cx(style.percentage, {\n                [style.fin]: user.percentage === 1\n              })}>\n                <div\n                  className={style.bar}\n                  style={{ width: `${~~(user.percentage * 100)}%`}}\n                />\n              </div>\n            </li>\n          )}\n        </ul>\n\n        {/* 改名 */}\n        <div className={cx([style.renamePane], {\n          [style.show]: event.show === 'rename'\n        })}>\n          <form onSubmit={event.handleRename}>\n            {NameDOM}\n            <button>Rename</button>\n          </form>\n        </div>\n\n        {/* 表格 */}\n        <div className={cx([style.editorPane], {\n          [style.show]: event.show === 'editor'\n        })}>\n          <Matrix {...{\n            data: event.matrix,\n            onClick: event.handlePutNum,\n            isActive: true,\n          }} />\n          <div className={style.buttons}>\n            <button className={style.reset} onClick={event.resetMatrix}>RESET</button>\n            <button className={style.random} onClick={event.randomMatrix}>RANDOM</button>\n          </div>\n        </div>\n\n        <div className={cx([style.qrcodePane], {\n          [style.show]: event.show === 'qrcode'\n        })}>\n          <img src={event.qrcode64} width=\"100%\" />\n          <div className={style.roomID}>{room}</div>\n          <div className={style.link} onClick={event.handleCopyLink}>\n            Copy the Link\n          </div>\n        </div>\n\n      </div>\n\n      <form className={style.sendMsgBar} onSubmit={event.handleSubmit}>\n        {!event.userList.findIndex(u => u.id === user.id) &&\n          <button\n            type=\"button\"\n            className={style.startBtn}\n            onClick={event.handleStartGame}\n            disabled={event.userList.some(({ percentage = 0 }) => percentage !== 1)}\n          >Start</button>\n        }\n        {InputDOM}\n        <button type=\"submit\" className={style.sendBtn}>　</button>\n      </form>\n    </div>\n  );\n}\n","import {\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport { useEffect, useMemo } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { useRouteMatch } from \"react-router-dom\";\n\nimport { User } from \"class\";\nimport * as Page from \"pages\";\n\nimport style from './style.module.scss';\n\nconst { REACT_APP_SOCKET_URL: SocketURL } = process.env;\n\nexport function RoomPage() {\n  const { path } = useRouteMatch();\n  const user = useMemo(() => new User(socketIOClient(SocketURL)), []);\n  useEffect(() => {\n    return () => user.leave();\n  }, []);\n\n  if(!user) return null;\n\n  return (\n    <div className={style.RoomPage}>\n      <Switch>\n        <Route path={`${path}/join`}><Page.JoinPage {...{ user }} /></Route>\n        <Route path={`${path}/game`}><Page.GamePage {...{ user }}  /></Route>\n        <Route path=\"*\"><Page.NotFoundPage /></Route>\n      </Switch>\n    </div>\n  );\n}\n","import { SocketEvent } from \"const\";\nimport { Matrix } from \"components\";\nimport { useLayoutEffect, useState } from \"react\";\nimport {\n  Link,\n  useParams,\n  useHistory,\n} from \"react-router-dom\";\n\nimport style from './style.module.scss';\n\nlet winLine = 0;\nlet winList = [];\nlet checkedList = [];\nlet plyerInfoList = [];\n\nconst nameColor = name => {\n  const num = +name.split('').map(s => s.charCodeAt()).join('');\n  const r = (~~(num / 23)) % 256;\n  const g = (~~(num / 24)) % 256;\n  const b = (~~(num / 25)) % 256;\n  return `rgba(${r}, ${g}, ${b}, .25)`;\n};\n\nexport function GamePage({ user }) {\n  const { room } = useParams();\n  const history = useHistory();\n  const [ turnID, setTurnID ] = useState(\"\");\n  useLayoutEffect(() => {\n    const Denied = () => {\n      user.leave();\n      history.push('/denied');\n    };\n\n    const UpdateChecked = (newCheckedList, newTurnID, newPlyerInfoList, newWinList = [], newWinLine) => {\n      checkedList = newCheckedList;\n      plyerInfoList = newPlyerInfoList;\n      winList = newWinList;\n      winLine = newWinLine;\n      setTurnID(newTurnID);\n    };\n\n    const SelfMatrix = (matrix, newCheckedList, newTurnID, newPlyerInfoList, newWinList = [], newWinLine) => {\n      user.matrix = matrix;\n      UpdateChecked(newCheckedList, newTurnID, newPlyerInfoList, newWinList, newWinLine);\n    };\n\n    // 如果使用者重整的話，並且立馬停止監聽\n    const fetchMatrix = () => {\n      user.fetchMatrix(room);\n      user.socket.off(SocketEvent.Room.PlayerUpdate, fetchMatrix);\n    };\n\n    const GoJoin = () => {\n      history.replace(`/${room}/join`);\n    };\n\n    // 拒絕進入，導頁\n    user.socket.on(SocketEvent.Room.Denied, Denied);\n\n    // 點擊數字\n    user.socket.on(SocketEvent.Game.UpdateChecked, UpdateChecked);\n\n    // 從伺服端取得自己的matrix\n    user.socket.on(SocketEvent.Game.SelfMatrix, SelfMatrix);\n\n    // 從伺服端取得自己的matrix\n    user.socket.on(SocketEvent.Game.GoJoin, GoJoin);\n\n    if(user.socket.connected) {\n      user.fetchMatrix(room); // trigger RoomPlayerUpdate\n    } else {\n      // join\n      // 如果使用者重整的話，會需要執行這行\n      user.join(room);\n      user.socket.on(SocketEvent.Room.PlayerUpdate, fetchMatrix);\n    }\n\n    return () => {\n      user.socket.off(SocketEvent.Game.GoJoin, GoJoin);\n      user.socket.off(SocketEvent.Room.Denied, Denied);\n      user.socket.off(SocketEvent.Game.SelfMatrix, SelfMatrix);\n      user.socket.off(SocketEvent.Game.UpdateChecked, UpdateChecked);\n    };\n  }, []);\n\n  const handleClick = index => {\n    if (checkedList.includes(user.matrix[index])) return;\n    user.checked(room, user.matrix[index]);\n    // save user checked num\n    // and notice other user the number is checked\n  };\n\n  const handleReplay = () => {\n    user.replay(room);\n  };\n\n  // winLine = 5;\n  // plyerInfoList = [\n  //   {name: '謝', winCount: ~~(Math.random() * 6)},\n  //   {name: 'def', winCount: ~~(Math.random() * 6)},\n  // ];\n  // winList = ['sexyoung', 'kelly']; // test\n  // console.warn(Boolean(winList.length)); // test\n  // user.matrix = [...Array(25).keys()]; // test\n\n  if(!user.matrix?.length) return null;\n  return (\n    <div className={style.GamePage}>\n      <div className={style.winMap}>\n        <div className={style.start}>0</div>\n        <div className={style.way}>\n          {plyerInfoList.map((playerInfo, index) =>\n            <div\n              key={index}\n              className={style.player}\n              style={{\n                zIndex: index,\n                left: `${100 * (playerInfo.winCount / winLine)}%`,\n              }}\n            >\n              <div\n                className={style.nameColor}\n                style={{\n                  backgroundColor: nameColor(playerInfo.name),\n                }}\n              />\n              {playerInfo.name.slice(0, 1)}\n            </div>\n          )}\n        </div>\n        <div className={style.end}>{winLine}</div>\n      </div>\n      <div className={style.gap}>\n        {\n          Boolean(winList.length) &&\n          <div className={style.result}>\n            <div className={style.winList}>\n              <div className={style.winnerIs}>Winner is</div>\n              <span>{winList.join(', ')}</span>\n            </div>\n            <div className={style.buttons}>\n              <div onClick={handleReplay}>Replay</div>\n              <Link to=\"/\">Home</Link>\n            </div>\n          </div>\n        }\n      </div>\n      <Matrix {...{\n        checkedList,\n        data: user.matrix,\n        onClick: handleClick,\n        className: style.Matrix,\n        isActive: turnID === user.id && !winList.length,\n      }} />\n    </div>\n  );\n}\n","export function DeniedPage() {\n  return (\n    <div>\n      <h2>DeniedPage</h2>\n    </div>\n  );\n}\n","export function NotFoundPage() {\n  return (\n    <div>\n      <h2>NotFoundPage</h2>\n    </div>\n  );\n}\n","import { useEffect } from \"react\";\nimport {\n  Route,\n  Switch,\n  HashRouter,\n} from \"react-router-dom\";\n\nimport { User } from \"class\";\nimport * as Page from \"pages\";\nimport style from './App.module.scss';\n\nfunction App() {\n\n  useEffect(() => {\n    new User();\n  }, []);\n\n  return (\n    <div className={style.App}>\n      <HashRouter>\n        <Switch>\n          <Route exact path=\"/\"><Page.HomePage /></Route>\n          <Route path=\"/denied\"><Page.DeniedPage /></Route>\n          <Route path=\"/:room\"><Page.RoomPage /></Route>\n          <Route path=\"*\"><Page.NotFoundPage /></Route>\n        </Switch>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.module.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n  // </React.StrictMode>,\n  <App />,\n  document.getElementById('root')\n);\n\nif (module.hot) {\n  module.hot.accept();\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"JoinPage\":\"style_JoinPage__1yRqt\",\"header\":\"style_header__3tP8g\",\"qrcode\":\"style_qrcode__1Ymzf\",\"fit\":\"style_fit__3ueTB\",\"playerCount\":\"style_playerCount__2ZlMH\",\"userName\":\"style_userName__2FLYj\",\"matrix\":\"style_matrix__3DhF3\",\"content\":\"style_content__3hdnE\",\"show\":\"style_show__1iKK8\",\"playerPane\":\"style_playerPane__3aZLP\",\"name\":\"style_name__1NsHE\",\"percentage\":\"style_percentage__1IAjC\",\"bar\":\"style_bar__WRKm2\",\"fin\":\"style_fin__-vbWu\",\"qrcodePane\":\"style_qrcodePane__2NTJq\",\"roomID\":\"style_roomID__2pQSQ\",\"link\":\"style_link__3kdmi\",\"renamePane\":\"style_renamePane__1NFcr\",\"editorPane\":\"style_editorPane__3dOQM\",\"buttons\":\"style_buttons__1B8NJ\",\"reset\":\"style_reset__1bZl_\",\"chatHistory\":\"style_chatHistory__2fE-_\",\"msgBox\":\"style_msgBox__oveu_\",\"isMe\":\"style_isMe__3khzJ\",\"same\":\"style_same__23AjY\",\"msg\":\"style_msg__19tUv\",\"text\":\"style_text__HUwxi\",\"sendMsgBar\":\"style_sendMsgBar__qhnKV\",\"startBtn\":\"style_startBtn__3y_kI\",\"sendBtn\":\"style_sendBtn__1QmdX\",\"modal\":\"style_modal__3Dz6u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BingoMatrix\":\"style_BingoMatrix__3ELFw\",\"active\":\"style_active__2Nq_8\",\"box\":\"style_box__3N-zJ\",\"checked\":\"style_checked__xbBbd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"HomePage\":\"style_HomePage__39HyE\",\"slogan\":\"style_slogan__3ESLi\",\"ballGroup\":\"style_ballGroup__3Yrc5\",\"ball\":\"style_ball__2mxKH\",\"subTitle\":\"style_subTitle__1-Xg-\",\"menu\":\"style_menu__2Jp3l\",\"create\":\"style_create__2PDh_\",\"form\":\"style_form__3edYN\",\"rule\":\"style_rule__Cjqvv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GamePage\":\"style_GamePage__3oB8L\",\"winMap\":\"style_winMap__2EpiN\",\"start\":\"style_start__3UEjd\",\"way\":\"style_way__3TNYO\",\"player\":\"style_player__1mIID\",\"nameColor\":\"style_nameColor__haFkJ\",\"end\":\"style_end__IFxsV\",\"gap\":\"style_gap__3ZdYz\",\"result\":\"style_result__3WXQ5\",\"winList\":\"style_winList__OB6Xp\",\"winnerIs\":\"style_winnerIs__8g5sy\",\"buttons\":\"style_buttons__2R5Gl\"};"],"sourceRoot":""}