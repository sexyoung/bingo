{"version":3,"sources":["pages/HomePage/index.js","components/Matrix/index.js","utils.js","domain/const/event.js","pages/JoinPage/useEvent.js","pages/JoinPage/index.js","pages/RoomPage/index.js","pages/GamePage/index.js","pages/DeniedPage/index.js","pages/NotFoundPage/index.js","App.js","reportWebVitals.js","index.js","pages/JoinPage/style.module.scss","components/Matrix/style.module.scss","pages/GamePage/style.module.scss","pages/HomePage/style.module.scss"],"names":["HomePage","roomDOM","useRef","history","useHistory","className","style","slogan","ballGroup","ball","subTitle","menu","create","onClick","fetch","process","then","res","json","roomName","push","onSubmit","e","preventDefault","current","value","form","required","type","ref","maxLength","pattern","placeholder","rule","to","Matrix","data","isActive","checkedList","handleClick","index","cx","BingoMatrix","active","Boolean","map","v","i","box","checked","includes","bind","RandChar","Array","keys","getRandomChar","len","result","String","fromCharCode","length","Math","random","SocketEvent","InfoReq","InfoRes","Denied","PlayerJoin","PlayerUpdate","UpdateProcess","MessageSend","MessageUpdate","CountDown","CountDownStop","CountDownEnd","CountDownCancel","StartGame","SaveMatrix","TriggerCountDown","TriggerStartGame","ChangeName","GoJoin","RePlay","Turn","CheckNum","SelfMatrix","FetchMatrix","UpdateChecked","useEvent","socket","nameDOM","createRef","inputDOM","roomID","useParams","canvasDOM","useState","size","chatHistoryDOM","show","setShow","count","setCount","user","setUser","roomInfo","setRoomInfo","userList","setUserList","qrcode64","setQRCode64","chatHistory","setChatHistory","fill","matrix","updateProcess","emit","filter","handleStartGame","useLayoutEffect","bingoUserID","localStorage","getItem","slice","makeID","setItem","qrcode","toDataURL","location","origin","pathname","replace","width","height","error","url","console","UserUpdate","RoomInfoUpdate","socketList","message","initial","on","connected","off","useEffect","scrollTop","scrollHeight","handleSubmit","id","a","check","navigator","userAgent","vendor","window","opera","test","substr","mobileCheck","blur","handleRename","newName","name","handleStartCountDown","resetMatrix","updateMatrix","randomMatrix","sort","handlePutNum","toggleShow","block","handleCopyLink","dummy","document","createElement","text","href","body","appendChild","select","execCommand","removeChild","alert","handleCountDownCancel","CanvasDOM","NameDOM","defaultValue","InputDOM","ChatHistoryDOM","msg","msgBox","isMe","same","JoinPage","event","game","room","header","this","playerCount","fit","userName","content","chatPane","playerPane","percentage","fin","bar","renamePane","editorPane","buttons","reset","qrcodePane","src","link","sendMsgBar","findIndex","u","startBtn","disabled","some","sendBtn","countdown","stopBtn","RoomPage","path","useRouteMatch","useMemo","socketIOClient","close","winLine","nameColor","num","split","s","charCodeAt","join","g","b","GamePage","turnID","setTurnID","winList","setWinList","setCheckedList","plyerInfoList","setPlyerInfoList","newCheckedList","newTurnID","newPlyerInfoList","newWinList","newWinLine","turnUser","find","winMap","start","way","playerInfo","player","zIndex","left","winCount","backgroundColor","end","gap","winnerIs","turn","title","your","others","DeniedPage","NotFoundPage","App","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.cb2fe184.chunk.js","sourcesContent":["import { useRef } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\n\nimport style from './style.module.scss';\n\nconst { REACT_APP_SOCKET_URL: SocketURL } = process.env;\n\nexport function HomePage() {\n  const roomDOM = useRef();\n  const history = useHistory();\n\n\n  const handleClick = () => {\n    fetch(`${SocketURL}/new-room`)\n      .then(res => res.json())\n      .then(roomName => {\n        history.push(`/${roomName}/join`);\n      });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    history.push(`/${roomDOM.current.value}/join`);\n  };\n\n  return (\n    <div className={style.HomePage}>\n      <div className={style.slogan}>\n        <div className={style.ballGroup}>\n          <div className={style.ball}>B</div>\n          <div className={style.ball}>I</div>\n          <div className={style.ball}>N</div>\n          <div className={style.ball}>G</div>\n          <div className={style.ball}>O</div>\n        </div>\n        <div className={style.subTitle}>\n          ONLINE BATTLE\n        </div>\n      </div>\n      <div className={style.menu}>\n        <button className={style.create} onClick={handleClick}>CREATE</button>\n        <h3>OR</h3>\n        <form onSubmit={handleSubmit} className={style.form}>\n          <input\n            required\n            type=\"text\"\n            ref={roomDOM}\n            maxLength=\"4\"\n            pattern=\"[0-9A-Z]{4}\"\n            placeholder=\"ROOM ID\" />\n          <button>JOIN</button>\n        </form>\n      </div>\n      <Link className={style.rule} to=\"/rule\">HOW TO PLAY</Link>\n    </div>\n  );\n}\n","import cx from \"classnames\";\n\nimport style from './style.module.scss';\n\nexport function Matrix({\n  data,\n  onClick,\n  isActive,\n  className = '',\n  checkedList = [],\n}) {\n\n  const handleClick = index => {\n    isActive && onClick(index);\n  };\n\n  return (\n    <div className={cx(style.BingoMatrix, {\n      [style.active]: isActive,\n      [className]: Boolean(className),\n    })}>\n      {data.map((v, i) =>\n        <div\n          key={i}\n          className={cx(style.box, {\n            [style.checked]: checkedList.includes(data[i])\n          })}\n          onClick={handleClick.bind(this, i)}\n        >{v}</div>\n      )}\n    </div>\n  );\n}\n","import fs from 'fs';\n\nconst RandChar = [\n  ...[...Array(10).keys()].map(v => v + 48),\n  ...[...Array(26).keys()].map(v => v + 65)\n];\n\nexport const getRandomChar = (len = 1) => {\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(\n      RandChar[~~(RandChar.length * Math.random())]\n    );\n  }\n  return result;\n};\n\nexport const makeID = (len = 32) => {\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += getRandomChar();\n    if(i % 8 === 7) result += '-';\n  }\n  return result.slice(0, result.length - 1);\n};\n\n/**\n *\n * @param size => `,n,n,n,|,n,n,n,|...`\n */\nexport const genWinStr = size => {\n  const result = [];\n  const serial = [...Array(size).keys()];\n  const serialPow = [...Array(size ** 2).keys()];\n\n  /** 直線 與 橫線 */\n  for (let i = 0; i < size; i++) {\n    result.push(serial.map(v => v * size + i));\n    result.push(serialPow.slice(i * size, (i + 1) * size));\n  }\n\n  /** 交叉線 */\n  result.push(serial.map(v => v * (size + 1)));\n  result.push(serial.map(v => (v + 1) * (size - 1)));\n  return result.map(line => `,${line.join(',')},`).join('|');\n};\n\nexport const randMatrix = size => {\n  const matrix = [...Array(size ** 2).keys()].map(v => v + 1);\n  matrix.sort(() => .5 - Math.random());\n  return matrix;\n};\n\nexport const isExistFile = (type, file) => {\n  return fs.existsSync(`./server/data/${type}/${file}.json`);\n};\n\nexport const readFile = (type, file) => {\n  return JSON.parse(fs.readFileSync(`./server/data/${type}/${file}.json`));\n};\n\nexport const writeFile = (type, file, content) => {\n  fs.writeFileSync(`./server/data/${type}/${file}.json`, JSON.stringify(content, null, 2));\n};","export const SocketEvent = {\n  Room: {\n    InfoReq: 'RoomInfoReq',\n    InfoRes: 'RoomInfoRes',\n    Denied: 'RoomDenied',\n    PlayerJoin: 'RoomPlayerJoin',\n    PlayerUpdate: 'RoomPlayerUpdate',\n    UpdateProcess: 'RoomUpdateProcess',\n    MessageSend: 'RoomMessageSend',\n    MessageUpdate: 'RoomMessageUpdate',\n    CountDown: 'RoomCountDown', // ← 遊戲開始前的倒數\n    CountDownStop: 'RoomCountDownStop',\n    CountDownEnd: 'RoomCountDownEnd',\n    CountDownCancel: 'RoomCountDownCancel',\n    StartGame: 'RoomStartGame',\n    SaveMatrix: 'RoomSaveMatrix',\n    TriggerCountDown: 'RoomTriggerCountDown',\n    TriggerStartGame: 'RoomTriggerStartGame',\n  },\n  User: {\n    InfoRes: 'UserInfoRes',\n    ChangeName: 'UserChangeName',\n  },\n  Game: {\n    InfoReq: 'GameInfoReq',\n    InfoRes: 'GameInfoRes',\n    GoJoin: 'GameGoJoin',\n    RePlay: 'GameRePlay',\n    Turn: 'GameTurn',\n    CheckNum: 'GameCheckNum',\n    SelfMatrix: 'GameSelfMatrix',\n    FetchMatrix: 'GameFetchMatrix',\n    UpdateChecked: 'GameUpdateChecked',\n  }\n};","import qrcode from 'qrcode';\nimport cx from \"classnames\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useLayoutEffect, createRef, useState, useEffect } from \"react\";\n\nimport { makeID } from \"utils\";\nimport { SocketEvent } from \"domain/const\";\n\nimport style from \"./style.module.scss\";\n\nconst mobileCheck = () => {\n  let check = false;\n  (function(a) {if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\n  return check;\n};\n\n/** 這邊看起來還是有點亂，想一下怎麼改 */\nexport const useEvent = socket => {\n  const nameDOM = createRef();\n  const inputDOM = createRef();\n  const history = useHistory();\n  const { roomID } = useParams();\n  const canvasDOM = createRef();\n  const [size, setSize] = useState(5);\n  const chatHistoryDOM = createRef([]);\n  const [show, setShow] = useState(\"\");\n  const [count, setCount] = useState(null);\n  const [user, setUser] = useState({});\n  const [roomInfo, setRoomInfo] = useState({});\n  const [userList, setUserList] = useState([]);\n  const [qrcode64, setQRCode64] = useState(null);\n  const [chatHistory, setChatHistory] = useState([]);\n  const [ matrix, setMatrix ] = useState(Array(size ** 2).fill(0));\n\n  const updateProcess = matrix => {\n    // user.matrix = matrix;\n    socket.emit(\n      SocketEvent.Room.UpdateProcess,\n      roomID,\n      matrix,\n      matrix.filter(v => v).length / (roomInfo.size ** 2)\n    );\n  };\n\n  // const matrixProcess = updateMatrix => {\n  //   updateProcess(updateMatrix);\n  // };\n\n  const randomMatrix = () => {\n    const updateMatrix = [...Array(size ** 2).keys()]\n      .map(v => v + 1)\n      .sort(() => .5 - Math.random());\n    /** 這邊是不是有更好的寫法? */\n    updateProcess(updateMatrix);\n  };\n\n  const handleStartGame = () => {\n    socket.emit(SocketEvent.Room.TriggerStartGame, roomID);\n  };\n\n  useLayoutEffect(() => {\n\n    const bingoUserID = localStorage.getItem('bingoUserID') || makeID();\n    localStorage.setItem('bingoUserID', bingoUserID);\n\n    // 加入\n    socket.emit(SocketEvent.Room.PlayerJoin, roomID, bingoUserID);\n\n    // 取得房間資訊\n    socket.emit( SocketEvent.Room.InfoReq, roomID );\n\n    qrcode.toDataURL(\n      `${location.origin + location.pathname}/#/${roomID}/join`.replace('bingo//', 'bingo/'), {\n        width: 512,\n        height: 512,\n      },\n      (error, url) => {\n        if (error) return console.error(error);\n        setQRCode64(url);\n      }\n    );\n\n    const UserUpdate = user => setUser(user);\n    const RoomInfoUpdate = roomInfo => setRoomInfo(roomInfo);\n    const PlayerUpdate = socketList => {\n      setUserList(socketList.filter(v => v));\n    };\n    const MessageUpdate = message => setChatHistory(chatHistory => [ ...chatHistory, message ]);\n    const Denied = () => {\n      history.push('/denied');\n    };\n\n    const CountDown = count => {\n      setCount(count);\n    };\n\n    const CountDownStop = () => {\n      setCount(null);\n    };\n\n    const StartGame = () => {\n      history.push(`/${roomID}/game`);\n    };\n\n    const initial = () => {\n\n      // 拒絕進入，導頁\n      socket.on(SocketEvent.Room.Denied, Denied);\n\n      // 使用者清單更新\n      socket.on(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\n\n      // 取得自己的資料\n      socket.on(SocketEvent.User.InfoRes, UserUpdate);\n\n      // 取得房間的資料\n      socket.on(SocketEvent.Room.InfoRes, RoomInfoUpdate);\n\n      // 訊息更新\n      socket.on(SocketEvent.Room.MessageUpdate, MessageUpdate);\n\n      // 開始倒數遊戲！\n      socket.on(SocketEvent.Room.CountDown, CountDown);\n\n      // 取消倒數\n      socket.on(SocketEvent.Room.CountDownStop, CountDownStop);\n\n      // 倒數結束\n      socket.on(SocketEvent.Room.CountDownEnd, handleStartGame);\n\n      // 開始遊戲!\n      socket.on(SocketEvent.Room.StartGame, StartGame);\n    };\n\n    // 導頁過來的\n    if(socket.connected) {\n      initial();\n    } else {\n      // 重整的\n      socket.on('connect', initial);\n    }\n\n    return () => {\n      socket.off(SocketEvent.User.InfoRes, UserUpdate);\n      socket.off(SocketEvent.Room.InfoRes, RoomInfoUpdate);\n      socket.off(SocketEvent.Room.Denied, Denied);\n      socket.off(SocketEvent.Room.CountDown, CountDown);\n      socket.off(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\n      socket.off(SocketEvent.Room.MessageUpdate, MessageUpdate);\n      socket.off(SocketEvent.Room.CountDown, CountDown);\n      socket.off(SocketEvent.Room.CountDownStop, CountDownStop);\n      socket.off(SocketEvent.Room.CountDownEnd, handleStartGame);\n      socket.off(SocketEvent.Room.StartGame, StartGame);\n    };\n\n  }, []);\n\n  useEffect(() => {\n    chatHistoryDOM.current.scrollTop = chatHistoryDOM.current.scrollHeight;\n  }, [chatHistory.length]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    socket.emit(SocketEvent.Room.MessageSend, user.id ,roomID, inputDOM.current.value);\n    inputDOM.current.value = '';\n    setShow('');\n    if(mobileCheck()) inputDOM.current.blur();\n  };\n\n  const toggleShow = block => {\n    setShow(show === block ? \"\": block);\n  };\n\n  const handleRename = e => {\n    e.preventDefault();\n    if(!nameDOM.current.value) return;\n    const newName = nameDOM.current.value;\n    socket.emit(SocketEvent.User.ChangeName, roomID, newName);\n    setUser(user => ({...user, name: newName}));\n    setShow('');\n  };\n\n  const handleStartCountDown = () => {\n    socket.emit(SocketEvent.Room.TriggerCountDown, roomID);\n  };\n\n  const resetMatrix = () => {\n    const updateMatrix = Array(size ** 2).fill(0);\n    /** 這邊是不是有更好的寫法? */\n    updateProcess(updateMatrix);\n  };\n\n  const handlePutNum = index => {\n    if(user.matrix[index]) return;\n    user.matrix[index] = user.matrix.filter(v => v).length + 1;\n    updateProcess(user.matrix);\n  };\n\n  const handleCopyLink = () => {\n    const dummy = document.createElement('input');\n    const text = window.location.href;\n\n    document.body.appendChild(dummy);\n    dummy.value = text;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n    alert('Copied!');\n  };\n\n  const handleCountDownCancel = () => {\n    socket.emit(SocketEvent.Room.CountDownCancel, roomID);\n  };\n\n  return {\n    show,\n    size,\n    user,\n    count,\n    matrix,\n    qrcode64,\n    userList,\n    roomInfo,\n    chatHistory,\n\n    handleSubmit,\n    handleRename,\n    // updateProcess,\n    handleStartCountDown,\n    handleStartGame,\n    // matrixProcess,\n    resetMatrix,\n    randomMatrix,\n    handlePutNum,\n    toggleShow,\n    handleCopyLink,\n    handleCountDownCancel,\n\n    CanvasDOM: <canvas ref={canvasDOM} id=\"canvas\" className={style.qrcode} />,\n    NameDOM: <input\n      required\n      type=\"text\"\n      ref={nameDOM}\n      className={style.name}\n      placeholder=\"your name\"\n      defaultValue={user.name}\n    />,\n    InputDOM: <input type=\"text\" ref={inputDOM} placeholder=\"輸入訊息\" required />,\n    ChatHistoryDOM: (\n      <div className={style.chatHistory} ref={chatHistoryDOM}>\n        {chatHistory.map((msg, i) =>\n          <div\n            key={i}\n            className={cx(style.msgBox, {\n              [style.isMe]: user.id === msg.user.id,\n              [style.same]: msg.user.id === chatHistory[i - 1]?.user?.id\n            })}\n          >\n            <div className={style.msg}>\n              {user.id !== msg.user.id && msg.user.id !== chatHistory[i - 1]?.user?.id &&\n                <div className={style.name}>{msg.user.name}</div>\n              }\n              <div className={style.text}>{msg.text}</div>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  };\n};","import cx from 'classnames';\nimport { useParams, Redirect } from \"react-router-dom\";\nimport { Matrix } from \"components\";\nimport { useEvent } from './useEvent';\n\nimport style from \"./style.module.scss\";\n\nexport function JoinPage({ socket }) {\n  const {\n    NameDOM,\n    roomInfo,\n    InputDOM,\n    ChatHistoryDOM,\n    ...event\n  } = useEvent(socket);\n\n  if(roomInfo?.game) {\n    return <Redirect to=\"/denied\" />;\n  }\n\n  const { room } = useParams();\n\n  return (\n    <div className={style.JoinPage}>\n      <div className={style.header}>\n        <div className={style.qrcode} onClick={event.toggleShow.bind(this, 'qrcode')} />\n        <div className={style.playerCount} onClick={event.toggleShow.bind(this, 'player')}>\n          {event.userList.length} Player\n        </div>\n        <div className={style.fit} />\n        <div className={style.userName} onClick={event.toggleShow.bind(this, 'rename')}>\n          {event.user.name}\n        </div>\n        <div className={style.matrix} onClick={event.toggleShow.bind(this, 'editor')}/>\n      </div>\n\n      <div className={style.content}>\n        <div className={cx([style.chatPane], {\n          [style.show]: event.show === ''\n        })}>\n          {ChatHistoryDOM}\n        </div>\n        {/* 線上玩家 */}\n        <ul className={cx([style.playerPane], {\n          [style.show]: event.show === 'player'\n        })}>\n          {event.userList.map(user =>\n            <li key={user.id}>\n              <div className={style.name}>{user.name}</div>\n              <div className={cx(style.percentage, {\n                [style.fin]: user.percentage === 1\n              })}>\n                <div\n                  className={style.bar}\n                  style={{ width: `${~~(user.percentage * 100)}%`}}\n                />\n              </div>\n            </li>\n          )}\n        </ul>\n\n        {/* 改名 */}\n        <div className={cx([style.renamePane], {\n          [style.show]: event.show === 'rename'\n        })}>\n          <form onSubmit={event.handleRename}>\n            {NameDOM}\n            <button>Rename</button>\n          </form>\n        </div>\n\n        {/* 表格 */}\n        {event.user.matrix &&\n          <div className={cx([style.editorPane], {\n            [style.show]: event.show === 'editor'\n          })}>\n            <Matrix {...{\n              data: event.user.matrix,\n              onClick: event.handlePutNum,\n              isActive: true,\n            }} />\n            <div className={style.buttons}>\n              <button className={style.reset} onClick={event.resetMatrix}>RESET</button>\n              <button className={style.random} onClick={event.randomMatrix}>RANDOM</button>\n            </div>\n          </div>\n        }\n\n        {/* qr code */}\n        <div className={cx([style.qrcodePane], {\n          [style.show]: event.show === 'qrcode'\n        })}>\n          <img src={event.qrcode64} width=\"100%\" />\n          <div className={style.roomID}>{room}</div>\n          <div className={style.link} onClick={event.handleCopyLink}>\n            Copy the Link\n          </div>\n        </div>\n\n      </div>\n\n      <form className={style.sendMsgBar} onSubmit={event.handleSubmit}>\n        {!event.userList.findIndex(u => u.id === event.user.id) &&\n          <button\n            type=\"button\"\n            className={style.startBtn}\n            onClick={event.handleStartCountDown}\n            disabled={event.userList.some(({ percentage = 0 }) => percentage !== 1)}\n          >Start</button>\n        }\n        {InputDOM}\n        <button type=\"submit\" className={style.sendBtn}>　</button>\n      </form>\n\n      {event.count !== null &&\n        <div className={cx(style.countdown)}>\n          {event.count}\n          <button className={style.stopBtn} onClick={event.handleCountDownCancel}>CANCEL</button>\n        </div>\n      }\n    </div>\n  );\n}\n","import {\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport { useEffect, useMemo } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { useRouteMatch } from \"react-router-dom\";\n\nimport * as Page from \"pages\";\n\nimport style from './style.module.scss';\n\nconst { REACT_APP_SOCKET_URL: SocketURL } = process.env;\n\nexport function RoomPage() {\n  const { path } = useRouteMatch();\n  const socket = useMemo(() => socketIOClient(SocketURL), []);\n  useEffect(() => {\n    return () => socket.close();\n  }, []);\n\n  // if(!user) return null;\n\n  return (\n    <div className={style.RoomPage}>\n      <Switch>\n        <Route path={`${path}/join`}><Page.JoinPage {...{ socket }} /></Route>\n        <Route path={`${path}/game`}><Page.GamePage {...{ socket }}  /></Route>\n        <Route path=\"*\"><Page.NotFoundPage /></Route>\n      </Switch>\n    </div>\n  );\n}\n","import { SocketEvent } from \"domain/const\";\nimport { Matrix } from \"components\";\nimport { useLayoutEffect, useState } from \"react\";\nimport {\n  Link,\n  Redirect,\n  useParams,\n  useHistory,\n} from \"react-router-dom\";\n\nimport style from './style.module.scss';\n\nlet winLine = 0;\n\nconst nameColor = name => {\n  const num = +name.split('').map(s => s.charCodeAt()).join('');\n  const r = (~~(num / 23)) % 256;\n  const g = (~~(num / 24)) % 256;\n  const b = (~~(num / 25)) % 256;\n  return `rgba(${r}, ${g}, ${b}, .45)`;\n};\n\nexport function GamePage({ socket }) {\n  /** 不允許中途加入 */\n  if(!socket.connected) {\n    return <Redirect to=\"/denied\" />;\n  }\n  const history = useHistory();\n  const {roomID} = useParams();\n  const [user, setUser] = useState({});\n  const [turnID, setTurnID] = useState(\"\");\n  const [winList, setWinList] = useState([]);\n  const [userList, setUserList] = useState([]);\n  const [checkedList, setCheckedList] = useState([]);\n  const [plyerInfoList, setPlyerInfoList] = useState([]);\n  useLayoutEffect(() => {\n    const Denied = () => {\n      history.push('/denied');\n    };\n\n    const PlayerUpdate = socketList => {\n      setUserList(socketList.filter(v => v));\n    };\n\n    const GoJoin = () => history.push(`/${roomID}/join`);\n\n    const UserUpdate = user => setUser({...user});\n\n    const UpdateChecked = (newCheckedList, newTurnID, newPlyerInfoList, newWinList = [], newWinLine) => {\n      setWinList([...newWinList]);\n      setCheckedList([...newCheckedList]);\n      setPlyerInfoList([...newPlyerInfoList]);\n      setTurnID(newTurnID);\n      winLine = newWinLine;\n\n      /** 只要有人贏，立刻關閉監聽這事件\n       * 不然會造成導回join頁時打出此事件但本來來不及 off\n       */\n      if(newWinList.length) {\n        socket.off(SocketEvent.User.InfoRes);\n      }\n    };\n\n    // 拒絕進入，導頁\n    socket.on(SocketEvent.Room.Denied, Denied);\n\n    // 從伺服端取得自己的matrix\n    socket.on(SocketEvent.Game.GoJoin, GoJoin);\n\n    // 取得自己的資料\n    socket.on(SocketEvent.User.InfoRes, UserUpdate);\n\n    // 監聽玩家變化\n    socket.on(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\n\n    // Turn\n    socket.on(SocketEvent.Game.Turn, UpdateChecked);\n\n    return () => {\n      socket.off(SocketEvent.Game.Turn, UpdateChecked);\n      socket.off(SocketEvent.Game.GoJoin, GoJoin);\n      socket.off(SocketEvent.Room.Denied, Denied);\n      socket.off(SocketEvent.Room.PlayerUpdate, PlayerUpdate);\n    };\n  }, []);\n\n  useLayoutEffect(() => {\n    if(!userList.length) {\n      // 取得遊戲資料\n      socket.emit(SocketEvent.Game.InfoReq, roomID);\n    }\n  }, [userList.length]);\n\n  const handleClick = index => {\n    if (checkedList.includes(user.matrix[index])) return;\n    socket.emit(\n      SocketEvent.Game.CheckNum,\n      roomID,\n      user.matrix[index]\n    );\n  };\n\n  const handleReplay = () => {\n    socket.emit(SocketEvent.Game.RePlay, roomID);\n  };\n\n  if(!user?.matrix?.length) return null;\n\n  const turnUser = plyerInfoList.find(({ id }) => id === turnID) || {};\n\n  return (\n    <div className={style.GamePage}>\n      <div className={style.winMap}>\n        <div className={style.start}>0</div>\n        <div className={style.way}>\n          {plyerInfoList.map((playerInfo, index) =>\n            <div\n              key={index}\n              className={style.player}\n              style={{\n                zIndex: index,\n                left: `${100 * (playerInfo.winCount / winLine)}%`,\n              }}\n            >\n              <div\n                className={style.nameColor}\n                style={{\n                  backgroundColor: nameColor(playerInfo.name),\n                }}\n              />\n              {playerInfo.name.slice(0, 1)}\n            </div>\n          )}\n        </div>\n        <div className={style.end}>{winLine}</div>\n      </div>\n      <div className={style.gap}>\n        {\n          Boolean(winList.length) ?\n            <div className={style.result}>\n              <div className={style.winList}>\n                <div className={style.winnerIs}>Winner is</div>\n                <span>{winList.join(', ')}</span>\n              </div>\n              <div className={style.buttons}>\n                <div onClick={handleReplay}>Replay</div>\n                <Link to=\"/\">Home</Link>\n              </div>\n            </div>:\n            <div className={style.turn}>\n              <div className={style.title}>\n                {turnID === user.id ?\n                  <div className={style.your}>YOUR</div>:\n                  <div className={style.others}>\n                    {turnUser?.name}'s\n                  </div>\n                }\n                TURN\n              </div>\n            </div>\n        }\n      </div>\n      <Matrix {...{\n        data: user.matrix,\n        onClick: handleClick,\n        className: style.Matrix,\n        checkedList,\n        isActive: turnID === user.id && !winList.length,\n      }} />\n    </div>\n  );\n}\n","export function DeniedPage() {\n  return (\n    <div>\n      <h2>DeniedPage</h2>\n    </div>\n  );\n}\n","export function NotFoundPage() {\n  return (\n    <div>\n      <h2>NotFoundPage</h2>\n    </div>\n  );\n}\n","import {\n  Route,\n  Switch,\n  HashRouter,\n} from \"react-router-dom\";\n\nimport * as Page from \"pages\";\nimport style from './App.module.scss';\n\nfunction App() {\n\n  return (\n    <div className={style.App}>\n      <HashRouter>\n        <Switch>\n          <Route exact path=\"/\"><Page.HomePage /></Route>\n          <Route path=\"/denied\"><Page.DeniedPage /></Route>\n          <Route path=\"/:roomID\"><Page.RoomPage /></Route>\n          <Route path=\"*\"><Page.NotFoundPage /></Route>\n        </Switch>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.module.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n// import './pre';\n\nReactDOM.render(\n  // <React.StrictMode>\n  // </React.StrictMode>,\n  <App />,\n  document.getElementById('root')\n);\n\nif (module.hot) {\n  module.hot.accept();\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"JoinPage\":\"style_JoinPage__1yRqt\",\"header\":\"style_header__3tP8g\",\"qrcode\":\"style_qrcode__1Ymzf\",\"fit\":\"style_fit__3ueTB\",\"playerCount\":\"style_playerCount__2ZlMH\",\"userName\":\"style_userName__2FLYj\",\"matrix\":\"style_matrix__3DhF3\",\"content\":\"style_content__3hdnE\",\"show\":\"style_show__1iKK8\",\"playerPane\":\"style_playerPane__3aZLP\",\"name\":\"style_name__1NsHE\",\"percentage\":\"style_percentage__1IAjC\",\"bar\":\"style_bar__WRKm2\",\"fin\":\"style_fin__-vbWu\",\"qrcodePane\":\"style_qrcodePane__2NTJq\",\"roomID\":\"style_roomID__2pQSQ\",\"link\":\"style_link__3kdmi\",\"renamePane\":\"style_renamePane__1NFcr\",\"editorPane\":\"style_editorPane__3dOQM\",\"buttons\":\"style_buttons__1B8NJ\",\"reset\":\"style_reset__1bZl_\",\"chatHistory\":\"style_chatHistory__2fE-_\",\"msgBox\":\"style_msgBox__oveu_\",\"isMe\":\"style_isMe__3khzJ\",\"same\":\"style_same__23AjY\",\"msg\":\"style_msg__19tUv\",\"text\":\"style_text__HUwxi\",\"sendMsgBar\":\"style_sendMsgBar__qhnKV\",\"startBtn\":\"style_startBtn__3y_kI\",\"sendBtn\":\"style_sendBtn__1QmdX\",\"countdown\":\"style_countdown__3tY60\",\"stopBtn\":\"style_stopBtn__1zDc6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BingoMatrix\":\"style_BingoMatrix__3ELFw\",\"active\":\"style_active__2Nq_8\",\"box\":\"style_box__3N-zJ\",\"checked\":\"style_checked__xbBbd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GamePage\":\"style_GamePage__3oB8L\",\"winMap\":\"style_winMap__2EpiN\",\"start\":\"style_start__3UEjd\",\"way\":\"style_way__3TNYO\",\"player\":\"style_player__1mIID\",\"nameColor\":\"style_nameColor__haFkJ\",\"end\":\"style_end__IFxsV\",\"gap\":\"style_gap__3ZdYz\",\"result\":\"style_result__3WXQ5\",\"winList\":\"style_winList__OB6Xp\",\"winnerIs\":\"style_winnerIs__8g5sy\",\"buttons\":\"style_buttons__2R5Gl\",\"turn\":\"style_turn__4Q5mq\",\"title\":\"style_title__3wcDe\",\"your\":\"style_your__1NriA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"HomePage\":\"style_HomePage__39HyE\",\"slogan\":\"style_slogan__3ESLi\",\"ballGroup\":\"style_ballGroup__3Yrc5\",\"ball\":\"style_ball__2mxKH\",\"subTitle\":\"style_subTitle__1-Xg-\",\"menu\":\"style_menu__2Jp3l\",\"create\":\"style_create__2PDh_\",\"form\":\"style_form__3edYN\",\"rule\":\"style_rule__Cjqvv\"};"],"sourceRoot":""}